{
  "comments": [
    {
      "key": {
        "uuid": "56969c24_f3381c4d",
        "filename": "zuul.d/component-jobs.yaml",
        "patchSetId": 2
      },
      "lineNbr": 1225,
      "author": {
        "id": 192
      },
      "writtenOn": "2020-11-27T13:10:57Z",
      "side": 1,
      "message": "this causes problems for the case of the upgrade jobs.\n\nfor example standalone-upgrade-victoria fails like: \n\n\t\t\t* https://logserver.rdoproject.org/01/31201/1/check/periodic-tripleo-ci-centos-8-standalone-upgrade-tripleo-victoria/0a1982b/logs/undercloud/home/zuul/install_packages.sh.log.txt.gz\n\t\t\t* 2020-11-26 12:10:57 |  Problem: cannot install the best candidate for the job\n\t\t2020-11-26 12:10:57 |   - nothing provides python3-openstacksdk \u003e\u003d 0.48.0 needed by python3-tripleoclient-14.0.1-0.20201112144218.c6461d1.el8.noarch\n\n\nThe add_repos here means that we have a victoria component-ci-testing:\n\n        * https://logserver.rdoproject.org/01/31201/1/check/periodic-tripleo-ci-centos-8-standalone-upgrade-tripleo-victoria/0a1982b/logs/undercloud/etc/yum.repos.d/tripleo-component.repo.txt.gz\n        * baseurl\u003dhttps://trunk.rdoproject.org/centos8-victoria/component/tripleo/component-ci-testing\n\n\nbut during the installation we are using ussuri repos for everything else:\n\n        * https://logserver.rdoproject.org/01/31201/1/check/periodic-tripleo-ci-centos-8-standalone-upgrade-tripleo-victoria/0a1982b/logs/undercloud/etc/yum.repos.d/delorean.repo.txt.gz\n        * baseurl\u003dhttp://mirror.regionone.vexxhost-nodepool-tripleo.rdoproject.org:8080/rdo/centos8-ussuri/component/tripleo/27/7c/277cfee98b5cfa2b89489fedb7ac49334855e2ab_268a3de3\n\nThe failing version of tripleoclient is coming from the component-ci-testing repo:         \n\n* https://trunk.rdoproject.org/centos8-victoria/component/tripleo/component-ci-testing/ * python3-tripleoclient-14.0.1-0.20201112144218.c6461d1.el8.noarch.rpm\n\nbut latest in delorean repo (clients component) for openstacksdk is:         \n        \n        * http://mirror.regionone.vexxhost-nodepool-tripleo.rdoproject.org:8080/rdo/centos8-ussuri/component/clients/8b/35/8b35c64fdac1b46bc10ae4b489914df7298944ab_4432ca02/        * python3-openstacksdk-tests-0.46.0-0.20200424132926.fc3b3d0.el8.noarch.rpm\n\nand we need the one from victoria to get new enough to satisfy requirement:         \n                \n        * http://mirror.regionone.vexxhost-nodepool-tripleo.rdoproject.org:8080/rdo/centos8-victoria/component/clients/current-tripleo/\n        * python-openstacksdk-0.50.0-0.20200928104615.9fd923e.el8.src.rpm",
      "range": {
        "startLine": 1219,
        "startChar": 5,
        "endLine": 1225,
        "endChar": 32
      },
      "revId": "f87707f088c83e3890f44920088d559c2554f8a4",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "439ea620_1a158a73",
        "filename": "zuul.d/component-jobs.yaml",
        "patchSetId": 2
      },
      "lineNbr": 1225,
      "author": {
        "id": 242
      },
      "writtenOn": "2020-11-30T20:50:34Z",
      "side": 1,
      "message": "As discussed - should be no issue to add enabled flag on the repo that is true by default and false (override var) in upgrade jobs\n\nSomething like:\n      vars:\n        repo_enable: true\n      add_repos:\n        - type: generic\n          reponame: \"{{ component }}\"\n          filename: \"{{ component }}-component.repo\"\n          priority: 1\n          baseurl: \"https://{{ dlrn_server_url }}/centos8-{{ release }}/component/{{ component }}/component-ci-testing\"\n          update_container: true\n          enabled: \"{{ repo_enable}}\"\n\nThen on upgrade jobs, set repo_enable to false to start\nand edit it later in the job back to true",
      "parentUuid": "56969c24_f3381c4d",
      "range": {
        "startLine": 1219,
        "startChar": 5,
        "endLine": 1225,
        "endChar": 32
      },
      "revId": "f87707f088c83e3890f44920088d559c2554f8a4",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cca1b333_6cb5df23",
        "filename": "zuul.d/component-jobs.yaml",
        "patchSetId": 2
      },
      "lineNbr": 1225,
      "author": {
        "id": 192
      },
      "writtenOn": "2020-12-03T12:28:41Z",
      "side": 1,
      "message": "k so with the depends-on https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/764767 in v3 of this patch it looks to be doing the right thing\n\nthe repo is installed and enabled by the multinode-standalone-upgrade playbook - commented there with pointers to logs in test         * https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/764767/2/playbooks/multinode-standalone-upgrade.yml#39\n\nPer the original problem described above, I sanity checked the packages and they look to be OK now.\n\nWe have python3-tripleoclient installed from the tripleo component-ci-testing repo and the required version of openstacksdk:\n\n\n\nAvailable version:\n\n        * https://trunk.rdoproject.org/centos8-master/component/tripleo/component-ci-testing/\n                * python-tripleoclient-14.1.0-0.20201202140358.10a5c9b.el8.src.rpm\n        \n\n\nInstalled:\n\n        * https://logserver.rdoproject.org/01/31201/1/check/periodic-tripleo-ci-centos-8-standalone-upgrade-tripleo-master/e47d5a3/logs/undercloud/var/log/extra/package-list-installed.txt.gz\n\n        * python3-tripleoclient.noarch                  14.1.0-0.20201202140358.10a5c9b.el8            @tripleo                           \n\n        * python3-openstacksdk.noarch                   0.52.0-0.20201120131401.e169c49.el8            @delorean-component-clients",
      "parentUuid": "56969c24_f3381c4d",
      "range": {
        "startLine": 1219,
        "startChar": 5,
        "endLine": 1225,
        "endChar": 32
      },
      "revId": "f87707f088c83e3890f44920088d559c2554f8a4",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    }
  ]
}