- hosts: standalone
  gather_facts: false
  tasks:
    - name: Ensure synchronize module is installed in controller
      ansible.builtin.command:
        ansible-galaxy collection install ansible.posix

    - name: Ensure logs/standalone folder exists
      ansible.builtin.file:
        path: '{{ ansible_user_dir }}/logs/standalone'
        state: directory

    - name: Copy log files from standalone vm
      ansible.posix.synchronize:
        src: '/root/'
        dest: '{{ ansible_user_dir }}/logs/standalone/'
        mode: pull
