---
- name: Install EPEL on CentOS 8
  package:
    name:
      - epel
    state: present
  become: true
  when:
    - ansible_distribution == "CentOS"
    - ansible_distribution_major_version == '8'

- name: Install pre-requisites for mock
  package:
    name:
      - createrepo
      - mock
      - redhat-rpm-config
      - rpmdevtools
      - spectool
    state: present
  become: true

- name: Ensure user in mock group
  user:
    name: "{{ ansible_user }}"
    groups: mock
    append: true
  become: true
