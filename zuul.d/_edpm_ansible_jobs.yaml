- job:
    name: edpm-ansible-github-rdo-integration-centos-8-crc-singlenode-centos-9-external-compute
    parent: base-crc
    nodeset: centos-8-crc-single-node-centos-9-external-compute
    timeout: 10800
    required-projects: &edpm_required_projects
      - openstack-k8s-operators/install_yamls
      - opendev.org/zuul/zuul-jobs
      - opendev.org/openstack/tripleo-repos
      - name: openstack-k8s-operators/edpm-ansible
        override-checkout: main
      - name: openstack-k8s-operators/openstack-ansibleee-operator
        override-checkout: main
      - rdo-jobs
    roles:
      - zuul: rdo-jobs
    pre-run: playbooks/edpm/subnode_ip.yaml
    run: playbooks/edpm/deploy_podified_control_plane.yaml
    post-run: playbooks/edpm/collect_logs.yaml
    vars: &edpm_vars
      registry_login_enabled: true
      push_registry: quay.rdoproject.org
      quay_login_secret_name: quay_nextgen_zuulgithubci

- job:
    name: openstack-ansibleee-operator-github-rdo-integration-centos-8-crc-singlenode-centos-9-external-compute
    parent: base-crc
    nodeset: centos-8-crc-single-node-centos-9-external-compute
    timeout: 10800
    required-projects: *edpm_required_projects
    roles:
      - zuul: rdo-jobs
    pre-run: playbooks/edpm/subnode_ip.yaml
    run: playbooks/edpm/deploy_podified_control_plane.yaml
    post-run: playbooks/edpm/collect_logs.yaml
    vars: *edpm_vars
