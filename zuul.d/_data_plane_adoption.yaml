- job:
    name: centos-9-standalone-to-crc-data-plane-adoption
    parent: base-crc-standalone
    nodeset: centos-9-crc-single-node-centos-9-standalone
    timeout: 10800
    required-projects:
      - name: openstack-k8s-operators/install_yamls
        override-checkout: main
      - opendev.org/zuul/zuul-jobs
      - opendev.org/openstack/tripleo-repos
      - name: openstack-k8s-operators/data-plane-adoption
        override-checkout: main
      - name: openstack-k8s-operators/ci-framework
        override-checkout: main
      - rdo-jobs
    roles:
      - zuul: rdo-jobs
      - zuul: github.com/openstack-k8s-operators/ci-framework
    pre-run:
      - playbooks/data_plane_adoption/subnode_ip.yaml
      - playbooks/data_plane_adoption/setup_crc_use_install_yamls.yaml
    post-run:
      - playbooks/data_plane_adoption/run_repo_tests.yaml
      - playbooks/data_plane_adoption/collect_logs_crc.yaml
    vars:
      crc_parameters: "--memory 22000 --disk-size 100 --cpus 8"
      crc_attach_default_interface: true
      network_isolation: true
      featureset: '052'
      skip_os_tempest: true
      release: wallaby
      branch_override: stable/wallaby
      registry_login_enabled: true
      # tbr - only for debuging
      ansible_verbosity: 5
      push_registry: quay.rdoproject.org
      quay_login_secret_name: quay_nextgen_zuulgithubci
      pre_pull_images:
        - registry.redhat.io/rhosp-rhel9/openstack-rabbitmq:17.0
        - quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:52bae04b3fb721ff53a5447515494d18a6db6ac1a4aed693d9bb99d0173ba15c
        - quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:afa73a12a1ffd31f77b10a25c43a4d02b0fd62f927f6209c26983bd8aee021bf
        - quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:fa0d95d2496796f561346e58d58316a20543a0b99e110d498f62f1bb7750b11f

- job:
    name: data-plane-adoption-github-rdo-centos-9-crc-single-node
    parent: cifmw-base-crc
    timeout: 10800
    required-projects:
      - name: openstack-k8s-operators/install_yamls
        override-checkout: main
      - opendev.org/zuul/zuul-jobs
      - opendev.org/openstack/tripleo-repos
      - name: openstack-k8s-operators/data-plane-adoption
        override-checkout: main
      - name: openstack-k8s-operators/ci-framework
        override-checkout: main
      - rdo-jobs
    roles:
      - zuul: rdo-jobs
      - zuul: github.com/openstack-k8s-operators/ci-framework
    pre-run:
      - playbooks/data_plane_adoption/subnode_ip.yaml
      - playbooks/data_plane_adoption/setup_crc_use_install_yamls.yaml
      - playbooks/data_plane_adoption/deploy_tripleo_standalone_network_isolation.yaml
    run:
      - playbooks/data_plane_adoption/run_repo_tests_single_node.yaml
    post-run:
      - playbooks/data_plane_adoption/collect_logs_crc.yaml
    vars:
      crc_parameters: "--memory 20000 --disk-size 120 --cpus 8"
      quay_login_secret_name: quay_nextgen_zuulgithubci
      standalone_vm_inventory: "standalone_vm_inventory"

- job:
    name: centos-9-standalone-to-crc-data-plane-adoption-os-diff
    parent: centos-9-standalone-to-crc-data-plane-adoption
    required-projects:
      - name: openstack-k8s-operators/install_yamls
        override-checkout: main
      - opendev.org/zuul/zuul-jobs
      - opendev.org/openstack/tripleo-repos
      - name: openstack-k8s-operators/data-plane-adoption
        override-checkout: main
      - name: openstack-k8s-operators/ci-framework
        override-checkout: main
      - rdo-jobs
      - name: github.com/openstack-k8s-operators/os-diff
        override-checkout: main
    roles:
      - zuul: rdo-jobs
      - zuul: github.com/openstack-k8s-operators/ci-framework
      - zuul: github.com/openstack-k8s-operators/os-diff
    pre-run:
      - playbooks/data_plane_adoption/subnode_ip.yaml
      - playbooks/data_plane_adoption/setup_crc_use_install_yamls.yaml
    post-run:
      - playbooks/data_plane_adoption/run_repo_tests.yaml
      - playbooks/data_plane_adoption/run_os_diff_tests.yaml
      - playbooks/data_plane_adoption/collect_logs_crc.yaml
