- job:
    name: data-plane-adoption-github-rdo-centos-9-crc-single-node
    parent: cifmw-base-crc
    timeout: 10800
    required-projects:
      - name: openstack-k8s-operators/install_yamls
        override-checkout: main
      - opendev.org/zuul/zuul-jobs
      - opendev.org/openstack/tripleo-repos
      - name: openstack-k8s-operators/data-plane-adoption
        override-checkout: main
      - name: openstack-k8s-operators/ci-framework
        override-checkout: main
      - rdo-jobs
    roles:
      - zuul: rdo-jobs
      - zuul: github.com/openstack-k8s-operators/ci-framework
    pre-run:
      - playbooks/data_plane_adoption/subnode_ip.yaml
      - playbooks/data_plane_adoption/setup_crc_use_install_yamls.yaml
    run:
      - playbooks/data_plane_adoption/deploy_standalone_run_repo_tests.yaml
    post-run:
      - playbooks/data_plane_adoption/collect_logs_crc.yaml
      - playbooks/force_job_failure.yaml
      - playbooks/data_plane_adoption/set_zuul_artifacts.yaml
    vars:
      crc_parameters: "--memory 22000 --disk-size 120 --cpus 8"
      quay_login_secret_name: quay_nextgen_zuulgithubci
      standalone_vm_inventory: "standalone_vm_inventory"
    irrelevant-files:
      - ^.*\.md$
      - ^.*\.rst$
      - ^docs/.*$
      - .github/workflows
      - mkdocs.yaml
      - .gitignore
      - LICENSE
