- job:
    name: data-plane-adoption-github-rdo-centos-8-crc-centos-9-standalone
    parent: base-crc-standalone
    nodeset: centos-8-crc-single-node-centos-9-standalone
    timeout: 10800
    required-projects:
      - name: openstack-k8s-operators/install_yamls
        override-checkout: main
      - opendev.org/zuul/zuul-jobs
      - opendev.org/openstack/tripleo-repos
      - name: openstack-k8s-operators/data-plane-adoption
        override-checkout: main
      - rdo-jobs
    roles:
      - zuul: rdo-jobs
    pre-run:
      - playbooks/edpm/subnode_ip.yaml
      - playbooks/data_plane_adoption/setup_crc_use_install_yamls.yaml
      - playbooks/data_plane_adoption/network_isolation_standalone.yaml
    post-run:
      - playbooks/data_plane_adoption/run_repo_tests.yaml
      - playbooks/data_plane_adoption/collect_logs_crc.yaml
    vars:
      crc_parameters: "--memory 18000 --disk-size 100 --cpus 8"
      crc_attach_default_interface: true
      network_isolation: true
      featureset: '052'
      skip_os_tempest: true
      release: wallaby
      branch_override: stable/wallaby
      registry_login_enabled: true
      push_registry: quay.rdoproject.org
      quay_login_secret_name: quay_nextgen_zuulgithubci
      pre_pull_images:
        - registry.redhat.io/rhosp-rhel9/openstack-rabbitmq:17.0
        - quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:52bae04b3fb721ff53a5447515494d18a6db6ac1a4aed693d9bb99d0173ba15c
        - quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:afa73a12a1ffd31f77b10a25c43a4d02b0fd62f927f6209c26983bd8aee021bf
        - quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:fa0d95d2496796f561346e58d58316a20543a0b99e110d498f62f1bb7750b11f
      # tweak standalone deployment for network isolation
      tripleo_deploy_networks_file: /home/zuul-worker/network_data.yaml
      tripleo_deploy_control_virtual_ip: 192.168.122.99
      tripleo_deploy_local_ip: 192.168.122.100/24
      tripleo_deploy_environment_files:
        - /usr/share/openstack-tripleo-heat-templates/environments/standalone/standalone-tripleo.yaml
        - /usr/share/openstack-tripleo-heat-templates/environments/low-memory-usage.yaml
        - /home/zuul-worker/standalone_parameters.yaml
        - /home/zuul-worker/containers-prepare-parameters.yaml
        - /usr/share/openstack-tripleo-heat-templates/environments/deployed-network-environment.yaml
        - /home/zuul-worker/deployed_network.yaml
