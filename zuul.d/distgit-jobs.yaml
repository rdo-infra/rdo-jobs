---
# zuul.d/distgit-jobs.yaml
# Zuul layout for TripleO standalone jobs.
# It contains all the jobs related to distgit testing.

##################################
#        CENTOS-8 JOBS           #
##################################


- job:
    name: distgit-tripleo-master-testing-centos-8-standalone
    parent: tripleo-ci-centos-8-standalone
    nodeset: single-centos-8-node-vexxhost
    run: playbooks/run-distgit.yaml
    vars:
      release: master

- job:
    name: distgit-tripleo-ci-centos-8-content-provider
    parent: tripleo-ci-centos-8-content-provider
    nodeset: single-centos-8-node-vexxhost

- job:
    name: distgit-tripleo-master-testing-centos-8-standalone-scenario001
    parent: tripleo-ci-centos-8-scenario001-standalone
    nodeset: single-centos-8-node-vexxhost
    run: playbooks/run-distgit.yaml
    vars:
      release: master

- job:
    name: distgit-tripleo-master-testing-centos-8-standalone-scenario002
    parent: tripleo-ci-centos-8-scenario002-standalone
    nodeset: single-centos-8-node-vexxhost
    run: playbooks/run-distgit.yaml
    vars:
      release: master

- job:
    name: distgit-tripleo-master-testing-centos-8-standalone-scenario003
    parent: tripleo-ci-centos-8-scenario003-standalone
    nodeset: single-centos-8-node-vexxhost
    run: playbooks/run-distgit.yaml
    vars:
      release: master

- job:
    name: distgit-tripleo-master-testing-centos-8-standalone-scenario004
    parent: tripleo-ci-centos-8-scenario004-standalone
    nodeset: single-centos-8-node-vexxhost
    run: playbooks/run-distgit.yaml
    vars:
      release: master

- job:
    name: distgit-tripleo-master-testing-centos-8-standalone-full-temepst
    parent: distgit-tripleo-master-testing-centos-8-standalone
    nodeset: single-centos-8-node-vexxhost
    timeout: 14400
    vars:
      featureset_override:
        run_tempest: false
        tempest_run_concurrency: 4
        tempest_services:
          - cinder
          - horizon
          - neutron
        tempest_test_whitelist:
          - 'api'
          - 'scenario'
        use_os_tempest: true

- job:
    name: distgit-tripleo-master-testing-centos-8-standalone-scenario007
    parent: tripleo-ci-centos-8-scenario007-standalone
    nodeset: single-centos-8-node-vexxhost
    run: playbooks/run-distgit.yaml
    vars:
      release: master

- job:
    name: distgit-tripleo-master-testing-centos-8-standalone-scenario010
    parent: tripleo-ci-centos-8-scenario010-standalone
    nodeset: single-centos-8-node-vexxhost
    run: playbooks/run-distgit.yaml
    vars:
      release: master

# Undercloud Job

- job:
    name: distgit-tripleo-master-testing-centos-8-undercloud-containers
    parent: tripleo-ci-centos-8-undercloud-containers
    nodeset: single-centos-8-node-vexxhost
    run: playbooks/run-distgit.yaml
    vars:
      release: master
      playbooks:
        - quickstart.yml
        - multinode-undercloud.yml
        - multinode-validate.yml

# Multinode Container job

- job:
    name: distgit-tripleo-master-testing-centos-8-containers-multinode
    parent: tripleo-ci-base-multinode-rdo-centos-8
    nodeset: two-centos-8-nodes-vexxhost
    run: playbooks/run-distgit.yaml
    voting: false
    vars:
      nodes: 1ctlr
      featureset: '010'
      release: master
      playbooks:
        - multinode.yml

# OVB fs01 job

- job:
    name: distgit-tripleo-master-testing-centos-8-ovb-3ctlr_1comp-featureset001
    parent: tripleo-ci-base-ovb-rdo-centos-8
    nodeset: tripleo-ovb-centos-8-primary-vexxhost
    run: playbooks/run-distgit.yaml
    timeout: 18000
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'
      release: master
      featureset_override:
        to_build: false

- job:
    name: distgit-tripleo-master-testing-centos-8-ovb-1ctlr_2comp-featureset020
    parent: tripleo-ci-base-ovb-rdo-centos-8
    nodeset: tripleo-ovb-centos-8-primary-vexxhost
    timeout: 18000
    run: playbooks/run-distgit.yaml
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'
      release: master
      featureset_override:
        to_build: false

- job:
    name: distgit-tripleo-master-testing-centos-8-ovb-3ctlr_1comp-featureset035
    parent: tripleo-ci-base-ovb-rdo-centos-8
    nodeset: tripleo-ovb-centos-8-primary-vexxhost
    run: playbooks/run-distgit.yaml
    vars:
      nodes: 3ctlr_1comp
      featureset: '035'
      release: master
      featureset_override:
        to_build: false
