---
# zuul.d/ovb-jobs.yaml
# Zuul layout for TripleO OVB RDO Cloud related jobs.
# It contains all the jobs related to OVB testing in RDO Cloud.

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001
    parent: tripleo-ci-base-ovb-rdo
    branches: ^(stable/(newton|ocata|pike|queens|rocky|stein|train)).*$
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'

- job:
    name: tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001
    parent: tripleo-ci-base-ovb-rdo-centos-8
    branches: ^(?!stable/(newton|ocata|pike|queens|rocky|stein|train)).*$
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'
      featureset_override:
        to_build: false

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset001
    parent: tripleo-ci-base-ovb-rdo
    branches: ^(stable/(newton|ocata|pike|queens|rocky|stein|train)).*$
    vars:
      nodes: 1ctlr_1comp
      featureset: '001'

- job:
    name: tripleo-ci-centos-8-ovb-1ctlr_1comp-featureset001
    parent: tripleo-ci-base-ovb-rdo-centos-8
    branches: ^(?!stable/(newton|ocata|pike|queens|rocky|stein|train)).*$
    vars:
      nodes: 1ctlr_1comp
      featureset: '001'
      featureset_override:
        to_build: false

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-ovb-master
    parent: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001
    branches: ^master$
    required-projects:
      - opendev.org/openstack/openstack-virtual-baremetal

- job:
    name: tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-ovb-master
    parent: tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001
    branches: ^master$
    required-projects:
      - opendev.org/openstack/openstack-virtual-baremetal

- job:
    name: tripleo-ci-rhel-8-ovb-3ctlr_1comp-featureset001
    parent: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001
    nodeset: tripleo-ovb-rhel-8-primary
    branches: ^master$
    vars:
      featureset_override:
        to_build: false

- job:
    name: tripleo-ci-rhel-8-ovb-3ctlr_1comp-featureset001-train
    parent: tripleo-ci-rhel-8-ovb-3ctlr_1comp-featureset001
    nodeset: tripleo-ovb-rhel-8-primary
    override-checkout: "stable/train"
    branches: ^master$
    voting: false
    vars:
      branch_override: "stable/train"

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-ovb-master
    parent: tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039
    branches: ^master$
    required-projects:
      - opendev.org/openstack/openstack-virtual-baremetal
    voting: false

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035
    parent: tripleo-ci-base-ovb-rdo
    branches: ^(stable/(newton|ocata|pike|queens|rocky|stein|train)).*$
    nodeset: upstream-centos-7-vexxhost
    vars:
      nodes: 3ctlr_1comp
      featureset: '035'
      cloud_name: vexxhost

- job:
    name: tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset035
    parent: tripleo-ci-base-ovb-rdo-centos-8
    branches: ^(?!stable/(newton|ocata|pike|queens|rocky|stein|train)).*$
    nodeset: upstream-centos-8-vexxhost
    vars:
      nodes: 3ctlr_1comp
      featureset: '035'
      cloud_name: vexxhost
      featureset_override:
        to_build: false

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-queens
    parent: tripleo-ci-base-ovb-rdo
    branches: ^master$
    override-checkout: "stable/queens"
    timeout: 18000
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'
      branch_override: "stable/queens"

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-rocky
    parent: tripleo-ci-base-ovb-rdo
    branches: ^master$
    override-checkout: "stable/rocky"
    timeout: 18000
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'
      branch_override: "stable/rocky"

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-stein
    parent: tripleo-ci-base-ovb-rdo
    branches: ^master$
    override-checkout: "stable/stein"
    timeout: 18000
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'
      branch_override: "stable/stein"

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-train
    parent: tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-stein
    override-checkout: "stable/train"
    vars:
      branch_override: "stable/train"

# Job for testing featureset002 changes
- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-upload
    parent: tripleo-ci-base-ovb-rdo
    branches: "^.*$"
    vars:
      nodes: 1ctlr_1comp
      featureset: '002'

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020
    parent: tripleo-ci-base-ovb-rdo
    timeout: 18000
    branches: ^(stable/(newton|ocata|pike|queens|rocky|stein|train)).*$
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'

- job:
    name: tripleo-ci-centos-8-ovb-1ctlr_2comp-featureset020
    parent: tripleo-ci-base-ovb-rdo-centos-8
    timeout: 18000
    branches: ^(?!stable/(newton|ocata|pike|queens|rocky|stein|train)).*$
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'
      featureset_override:
        to_build: false

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset022
    parent: tripleo-ci-base-ovb-rdo
    branches: ^stable/pike$
    vars:
      nodes: 1ctlr_1comp
      featureset: '022'

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021
    parent: tripleo-ci-base-ovb-rdo
    branches: ".*"
    timeout: 18000
    vars:
      nodes: 1ctlr_2comp
      featureset: '021'

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_1comp_1ceph-featureset024
    parent: tripleo-ci-base-ovb-rdo
    branches: ^stable/pike$
    vars:
      nodes: 1ctlr_1comp_1ceph
      featureset: '024'

# set to voting false until this starts passing again
- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset053
    parent: tripleo-ci-base-ovb-rdo
    timeout: 14400
    branches: ^master$
    voting: false
    vars:
      nodes: 3ctlr_1comp
      featureset: '053'
      playbooks:
        - ovb-setup.yml
        - baremetal-full-undercloud.yml
        - baremetal-full-overcloud-prep.yml
        - baremetal-full-overcloud.yml
        - baremetal-full-overcloud-validate.yml
        - browbeat-minimal.yml

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset041
    parent: tripleo-ci-base-ovb-rdo
    timeout: 14400
    vars:
      nodes: 3ctlr_1comp
      featureset: '041'
      playbooks:
        - ovb-setup.yml
        - baremetal-full-undercloud.yml
        - baremetal-full-overcloud-prep.yml
        - baremetal-full-overcloud.yml
        - baremetal-full-overcloud-validate.yml
        - overcloud-validate-ha.yml

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset042
    parent: tripleo-ci-base-ovb-rdo
    branches: ^(?!stable/(newton|ocata|pike)).*$
    timeout: 10800
    vars:
      nodes: 3ctlr_1comp
      featureset: '042'

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-queens-branch
    parent: tripleo-ci-base-ovb-rdo
    branches: ^master$
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'
      branch_override: "stable/queens"

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-rocky-branch
    parent: tripleo-ci-base-ovb-rdo
    branches: ^master$
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'
      branch_override: "stable/rocky"

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-stein-branch
    parent: tripleo-ci-base-ovb-rdo
    branches: ^master$
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'
      branch_override: "stable/stein"

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-train-branch
    parent: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-ovb-master
    branches: ^stable/train$
    vars:
      branch_override: "stable/train"

- job:
    name: tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-train-branch
    parent: tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-ovb-master
    branches: ^stable/train$
    vars:
      branch_override: "stable/train"

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-vexxhost
    parent: tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001
    nodeset: upstream-centos-7-vexxhost
    timeout: 18000
    vars:
      cloud_name: vexxhost

- job:
    name: tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-vexxhost
    parent: tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001
    nodeset: upstream-centos-8-vexxhost
    timeout: 18000
    vars:
      cloud_name: vexxhost

- job:
    name: tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039
    parent: tripleo-ci-base-ovb-rdo
    timeout: 12600
    branches: ^(stable/(rocky|stein|train)).*$
    voting: false
    vars:
      nodes: 3ctlr_1comp_1supp
      featureset: '039'
      playbooks:
        - ovb-setup.yml
        - baremetal-full-freeipa.yml
        - baremetal-full-undercloud.yml
        - baremetal-full-overcloud-prep.yml
        - baremetal-full-overcloud.yml
        - baremetal-full-overcloud-validate.yml

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_2comp_1supp-featureset039
    parent: tripleo-ci-base-ovb-rdo
    timeout: 12600
    branches: "^.*$"
    vars:
      nodes: 1ctlr_2comp_1supp
      featureset: '039'
      playbooks:
        - ovb-setup.yml
        - baremetal-full-freeipa.yml
        - baremetal-full-undercloud.yml
        - baremetal-full-overcloud-prep.yml
        - baremetal-full-overcloud.yml
        - baremetal-full-overcloud-validate.yml

- job:
    name: tripleo-ci-centos-7-ovb-1ctlr_1cellctrl_1comp-featureset063
    parent: tripleo-ci-base-ovb-rdo
    branches: ".*"
    timeout: 12600
    vars:
      nodes: 1ctlr_1cellctrl_1comp
      featureset: '063'

# =================  C E N T O S  8  C H E C K  J O B S

- job:
    name: tripleo-ci-centos-8-ovb-3ctlr_1comp_1supp-featureset039
    parent: tripleo-ci-base-ovb-rdo-centos-8
    timeout: 12600
    branches: ^(?!stable/(newton|ocata|pike|queens|rocky|stein|train)).*$
    voting: false
    vars: &fs39_vars
      nodes: 3ctlr_1comp_1supp
      featureset: '039'
      playbooks:
        - ovb-setup.yml
        - baremetal-full-freeipa.yml
        - baremetal-full-undercloud.yml
        - baremetal-full-overcloud-prep.yml
        - baremetal-full-overcloud.yml
        - baremetal-full-overcloud-validate.yml
      featureset_override:
        use_os_tempest: true
        run_tempest: false

# =================  C E N T O S  7  P E R I O D I C   J O B S
# legacy-periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-master
- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-master
    parent: tripleo-ci-base-ovb-periodic
    # Bumping to 5hours for fs1 to run *api* tempest see
    # https://tree.taiga.io/project/tripleo-ci-board/task/1383
    timeout: 18000
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'
      release: master

# legacy-periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-queens
- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-queens
    parent: tripleo-ci-base-ovb-periodic
    # Bumping to 5hours for fs1 to run *api* tempest see
    # https://tree.taiga.io/project/tripleo-ci-board/task/1383
    timeout: 18000
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'
      branch_override: "stable/queens"
      release: queens

# legacy-periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-rocky
- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-rocky
    parent: tripleo-ci-base-ovb-periodic
    # Bumping to 5hours for fs1 to run *api* tempest see
    # https://tree.taiga.io/project/tripleo-ci-board/task/1383
    timeout: 18000
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'
      branch_override: "stable/rocky"
      release: rocky

- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-stein
    parent: tripleo-ci-base-ovb-periodic
    # Bumping to 5hours for fs1 to run *api* tempest see
    # https://tree.taiga.io/project/tripleo-ci-board/task/1383
    timeout: 18000
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'
      branch_override: "stable/stein"
      release: stein

- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-train
    parent: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-rhel-8-ovb-3ctlr_1comp-featureset001-master
    parent: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset001-master
    nodeset: tripleo-ovb-rhel-8-primary
    vars:
      featureset_override:
        to_build: false

# Note(chkumar): Use RHEL/CentOS parent from master job
- job:
    name: periodic-tripleo-ci-rhel-8-ovb-3ctlr_1comp-featureset001-train
    parent: periodic-tripleo-ci-rhel-8-ovb-3ctlr_1comp-featureset001-master
    vars:
      branch_override: "stable/train"
      release: train

# legacy-periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-master-upload
- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-master-upload
    parent: tripleo-ci-base-ovb-periodic-upload
    vars:
      nodes: 1ctlr_1comp
      featureset: '002'
      release: master

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-train-upload
    parent: periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-master-upload
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-stein-upload
    parent: tripleo-ci-base-ovb-periodic-upload
    vars:
      nodes: 1ctlr_1comp
      featureset: '002'
      branch_override: "stable/stein"
      release: stein

# legacy-periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-rocky-upload
- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-rocky-upload
    parent: tripleo-ci-base-ovb-periodic-upload
    vars:
      nodes: 1ctlr_1comp
      featureset: '002'
      branch_override: "stable/rocky"
      release: rocky

# legacy-periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-queens-upload
- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_1comp-featureset002-queens-upload
    parent: tripleo-ci-base-ovb-periodic-upload
    vars:
      nodes: 1ctlr_1comp
      featureset: '002'
      branch_override: "stable/queens"
      release: queens

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-master
    parent: tripleo-ci-base-ovb-periodic
    timeout: 18000
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'
      release: master

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-queens
    parent: tripleo-ci-base-ovb-periodic
    override-checkout: "stable/queens"
    timeout: 18000
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'
      branch_override: "stable/queens"
      release: queens

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-rocky
    parent: tripleo-ci-base-ovb-periodic
    timeout: 18000
    override-checkout: "stable/rocky"
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'
      branch_override: "stable/rocky"
      release: rocky

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-stein
    parent: tripleo-ci-base-ovb-periodic
    timeout: 18000
    override-checkout: "stable/stein"
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'
      branch_override: "stable/stein"
      release: stein

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-train
    parent: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset020-master
    override-checkout: "stable/train"
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-master
    parent: tripleo-ci-base-ovb-periodic
    timeout: 18000
    vars:
      nodes: 1ctlr_2comp
      featureset: '021'
      release: master

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-train
    parent: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-master
    override-checkout: "stable/train"
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-stein
    parent: tripleo-ci-base-ovb-periodic
    timeout: 18000
    override-checkout: "stable/stein"
    vars:
      nodes: 1ctlr_2comp
      featureset: '021'
      branch_override: "stable/stein"
      release: stein

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-rocky
    parent: tripleo-ci-base-ovb-periodic
    timeout: 18000
    override-checkout: "stable/rocky"
    vars:
      nodes: 1ctlr_2comp
      featureset: '021'
      branch_override: "stable/rocky"
      release: rocky

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-queens
    parent: tripleo-ci-base-ovb-periodic
    timeout: 18000
    override-checkout: "stable/queens"
    vars:
      nodes: 1ctlr_2comp
      featureset: '021'
      branch_override: "stable/queens"
      release: queens

# legacy-periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-master
- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-master
    parent: tripleo-ci-base-ovb-periodic
    vars:
      nodes: 3ctlr_1comp
      featureset: '035'
      release: master

- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-train
    parent: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-stein
    parent: tripleo-ci-base-ovb-periodic
    vars:
      nodes: 3ctlr_1comp
      featureset: '035'
      branch_override: "stable/stein"
      release: stein

# legacy-periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-rocky
- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-rocky
    parent: tripleo-ci-base-ovb-periodic
    vars:
      nodes: 3ctlr_1comp
      featureset: '035'
      branch_override: "stable/rocky"
      release: rocky

# legacy-periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-queens
- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp-featureset035-queens
    parent: tripleo-ci-base-ovb-periodic
    vars:
      nodes: 3ctlr_1comp
      featureset: '035'
      branch_override: "stable/queens"
      release: queens

- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-master
    parent: tripleo-ci-base-ovb-periodic
    timeout: 12600
    vars:
      nodes: 3ctlr_1comp_1supp
      featureset: '039'
      release: master
      playbooks:
        - ovb-setup.yml
        - baremetal-full-freeipa.yml
        - baremetal-full-undercloud.yml
        - baremetal-full-overcloud-prep.yml
        - baremetal-full-overcloud.yml
        - baremetal-full-overcloud-validate.yml

- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-train
    parent: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-stein
    parent: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-master
    vars:
      branch_override: "stable/stein"
      release: stein

- job:
    name: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-rocky
    parent: periodic-tripleo-ci-centos-7-ovb-3ctlr_1comp_1supp-featureset039-master
    vars:
      branch_override: "stable/rocky"
      release: rocky

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_1cellctrl_1comp-featureset063-master
    parent: tripleo-ci-base-ovb-rdo
    timeout: 12600
    vars:
      nodes: 1ctlr_1cellctrl_1comp
      featureset: '063'
      release: master

- job:
    name: periodic-tripleo-ci-centos-7-ovb-1ctlr_1cellctrl_1comp-featureset063-train
    parent: periodic-tripleo-ci-centos-7-ovb-1ctlr_1cellctrl_1comp-featureset063-master
    vars:
      branch_override: "stable/train"
      release: train

##################################################################
#################### CENTOS-8 PERIODIC JOBS ######################
##################################################################

- job:
    name: periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-master
    parent: tripleo-ci-base-ovb-periodic-centos-8
    # Bumping to 5hours for fs1 to run *api* tempest see
    # https://tree.taiga.io/project/tripleo-ci-board/task/1383
    timeout: 18000
    vars:
      nodes: 3ctlr_1comp
      featureset: '001'
      release: master
      featureset_override:
        to_build: false

- job:
    name: periodic-tripleo-ci-centos-8-ovb-1ctlr_2comp-featureset020-master
    parent: tripleo-ci-base-ovb-periodic-centos-8
    timeout: 18000
    vars:
      nodes: 1ctlr_2comp
      featureset: '020'
      release: master
      featureset_override:
        to_build: false

- job:
    name: periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset035-master
    parent: tripleo-ci-base-ovb-periodic-centos-8
    vars:
      nodes: 3ctlr_1comp
      featureset: '035'
      release: master
      featureset_override:
        to_build: false

##################################################################
############### CENTOS-8 COMPONENT PROMOTION JOBS ################
##################################################################

# tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-component-master
- job:
    name: periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-component-master
    parent: periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-master
    abstract: true
    vars: &component_vars
      component: component
      release: master
      featureset_override:
        to_build: false
      component_update_overcloud_image: true
      dlrn_server_url: "trunk.rdoproject.org"
      promote_source: component-ci-testing
      add_repos:
        - type: generic
          reponame: "{{ component }}"
          filename: "{{ component }}-component.repo"
          priority: 1
          baseurl: "https://{{ dlrn_server_url }}/centos8-{{ release }}/component/{{ component }}/component-ci-testing"
          update_container: true

- job:
    name: periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-baremetal-master
    parent: periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-component-master
    vars:
      component: baremetal

- job:
    name: periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp_1supp-featureset039-master
    parent: tripleo-ci-base-ovb-periodic-centos-8
    timeout: 12600
    vars:
      <<: *fs39_vars
      release: master
