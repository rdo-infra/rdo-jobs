---
# zuul.d/standalone-jobs.yaml
# Zuul layout for TripleO standalone jobs.
# It contains all the jobs related to standalone installer testing.


- job:
    name: periodic-tripleo-ci-centos-7-standalone-master
    parent: tripleo-ci-base-standalone-periodic
    vars: &standalone_vars
      featureset: '052'
      release: master

- job:
    name: periodic-tripleo-ci-centos-7-standalone-upgrade-master
    parent: tripleo-ci-base-standalone-upgrade-periodic
    vars:
      featureset: '056'
      release: master

- job:
    name: periodic-tripleo-ci-centos-7-standalone-full-tempest-master
    parent: periodic-tripleo-ci-centos-7-standalone-master
    timeout: 13500
    vars:
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        tempest_run_concurrency: 2
        tempest_services:
          - cinder
          - horizon
          - neutron
        tempest_test_whitelist:
          - 'api'
          - 'scenario'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-7-scenario001-standalone-master
    parent: tripleo-ci-base-standalone-periodic
    vars: &scen1_standalone_vars
      featureset: '052'
      release: master
      standalone_ceph: true
      featureset_override:
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario001-standalone.yaml'
        tempest_services:
          - aodh
        run_tempest: false
        use_os_tempest: true
        tempest_run_concurrency: 1
        tempest_tempest_conf_overrides:
          telemetry.alarm_granularity: '60'
          auth.tempest_roles: "Member"
        tempest_test_whitelist:
          - 'tempest.api.identity.v3'
          - 'tempest.scenario.test_volume_boot_pattern.TestVolumeBootPattern.test_volume_boot_pattern'
          - 'telemetry_tempest_plugin.scenario.test_telemetry_integration.TestTelemetryIntegration'

- job:
    name: periodic-tripleo-ci-centos-7-scenario002-standalone-master
    parent: tripleo-ci-base-standalone-periodic
    vars: &scen2_standalone_vars
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario002-standalone.yaml'
        tempest_services:
          - barbican
          - ceilometer
          - aodh
        tempest_tempest_conf_overrides:
          auth.tempest_roles: "'Member, creator'"
          telemetry.alarm_granularity: '60'
        tempest_test_whitelist:
          - 'tempest.api.object_storage.test_object_services.ObjectTest'
          - 'barbican_tempest_plugin.tests.scenario.test_volume_encryption.VolumeEncryptionTest'
          - 'telemetry_tempest_plugin.scenario.test_telemetry_integration.TestTelemetryIntegration'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-7-scenario003-standalone-master
    parent: tripleo-ci-base-standalone-periodic
    vars: &scen3_standalone_vars
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario003-standalone.yaml'
        tempest_services:
          - sahara
          - mistral
        tempest_tempest_conf_overrides:
          auth.tempest_roles: "Member"
        tempest_test_whitelist:
          - 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_network_basic_ops'
          - 'sahara_tempest_plugin.tests.api.test_data_sources.DataSourceTest'
          - 'mistral_tempest_tests.tests.api.v2.test_actions.ActionTestsV2'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-7-scenario004-standalone-master
    parent: tripleo-ci-base-standalone-periodic
    vars: &scen4_standalone_vars
      featureset: '052'
      release: master
      standalone_ceph: true
      featureset_override:
        run_tempest: false
        standalone_container_cli: docker
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario004-standalone.yaml'
        tempest_services:
          - manila
        tempest_tempest_conf_overrides:
          'auth.tempest_roles': 'Member'
          'share.multitenancy_enabled': 'False'
          'share.enable_protocols': 'cephfs'
          'share.capability_snapshot_support': 'False'
          'share.capability_create_share_from_snapshot_support': 'False'
        tempest_test_whitelist:
          - 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_network_basic_ops'
          - 'manila_tempest_tests.tests.api.test_shares.SharesCephFSTest.test_create_get_delete_share'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-7-scenario007-standalone-master
    parent: tripleo-ci-base-standalone-periodic
    vars: &scen7_standalone_vars
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario007-standalone.yaml'
        tempest_services:
          - neutron
        tempest_test_whitelist:
          - 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_network_basic_ops'
        tempest_private_net_provider_type: 'vxlan'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-7-scenario010-standalone-master
    parent: tripleo-ci-base-standalone-periodic
    vars: &scen10_standalone_vars
      featureset: '052'
      release: master
      standalone_ceph: true
      featureset_override:
        run_tempest: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'environments/services/octavia.yaml'
          - 'ci/environments/scenario010-standalone.yaml'
        use_os_tempest: false

### CentOS-8 Jobs
- job:
    name: periodic-tripleo-ci-centos-8-standalone-master
    parent: tripleo-ci-base-standalone-periodic-centos-8
    vars:
      featureset: '052'
      release: master

- job:
    name: periodic-tripleo-ci-centos-8-standalone-network-tempest-master
    parent: tripleo-ci-base-standalone-periodic-centos-8
    vars:
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        tempest_test_whitelist:
          - 'network'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-master
    parent: periodic-tripleo-ci-centos-8-standalone-master
    timeout: 14400
    vars:
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        tempest_run_concurrency: 4
        tempest_services:
          - cinder
          - horizon
          - neutron
        tempest_test_whitelist:
          - 'api'
          - 'scenario'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-api-master
    parent: periodic-tripleo-ci-centos-8-standalone-master
    timeout: 14400
    vars:
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        tempest_run_concurrency: 4
        tempest_services:
          - cinder
          - horizon
          - neutron
        tempest_test_whitelist:
          - 'api'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-scenario-master
    parent: periodic-tripleo-ci-centos-8-standalone-master
    timeout: 14400
    vars:
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        tempest_run_concurrency: 4
        tempest_services:
          - cinder
          - horizon
          - neutron
        tempest_test_whitelist:
          - 'scenario'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-8-scenario001-standalone-master
    parent: tripleo-ci-base-standalone-periodic-centos-8
    vars:
      featureset: '052'
      release: master
      standalone_ceph: true
      featureset_override:
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario001-standalone.yaml'
        tempest_services:
          - aodh
        run_tempest: false
        use_os_tempest: true
        tempest_run_concurrency: 1
        tempest_tempest_conf_overrides:
          telemetry.alarm_granularity: '60'
          auth.tempest_roles: "Member"
        tempest_test_whitelist:
          - 'tempest.api.identity.v3'
          - 'tempest.scenario.test_volume_boot_pattern.TestVolumeBootPattern.test_volume_boot_pattern'
          - 'telemetry_tempest_plugin.scenario.test_telemetry_integration.TestTelemetryIntegration'

- job:
    name: periodic-tripleo-ci-centos-8-scenario002-standalone-master
    parent: tripleo-ci-base-standalone-periodic-centos-8
    vars:
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario002-standalone.yaml'
        tempest_services:
          - barbican
          - ceilometer
          - aodh
        tempest_tempest_conf_overrides:
          auth.tempest_roles: "'Member, creator'"
          telemetry.alarm_granularity: '60'
        tempest_test_whitelist:
          - 'tempest.api.object_storage.test_object_services.ObjectTest'
          - 'barbican_tempest_plugin.tests.scenario.test_volume_encryption.VolumeEncryptionTest'
          - 'telemetry_tempest_plugin.scenario.test_telemetry_integration.TestTelemetryIntegration'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-8-scenario003-standalone-master
    parent: tripleo-ci-base-standalone-periodic-centos-8
    vars:
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario003-standalone.yaml'
        tempest_services:
          - sahara
          - mistral
        tempest_tempest_conf_overrides:
          auth.tempest_roles: "Member"
        tempest_test_whitelist:
          - 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_network_basic_ops'
          - 'sahara_tempest_plugin.tests.api.test_data_sources.DataSourceTest'
          - 'mistral_tempest_tests.tests.api.v2.test_actions.ActionTestsV2'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-8-scenario004-standalone-master
    parent: tripleo-ci-base-standalone-periodic-centos-8
    vars:
      featureset: '052'
      release: master
      standalone_ceph: true
      featureset_override:
        run_tempest: false
        standalone_container_cli: podman
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario004-standalone.yaml'
          - 'environments/podman.yaml'
        tempest_services:
          - manila
        tempest_tempest_conf_overrides:
          'auth.tempest_roles': 'Member'
          'share.multitenancy_enabled': 'False'
          'share.enable_protocols': 'cephfs'
          'share.capability_snapshot_support': 'False'
          'share.capability_create_share_from_snapshot_support': 'False'
        tempest_test_whitelist:
          - 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_network_basic_ops'
          - 'manila_tempest_tests.tests.api.test_shares.SharesCephFSTest.test_create_get_delete_share'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-8-scenario007-standalone-master
    parent: tripleo-ci-base-standalone-periodic-centos-8
    vars:
      featureset: '052'
      release: master
      featureset_override:
        run_tempest: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario007-standalone.yaml'
        tempest_services:
          - neutron
        tempest_test_whitelist:
          - 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_network_basic_ops'
        tempest_private_net_provider_type: 'vxlan'
        use_os_tempest: true

- job:
    name: periodic-tripleo-ci-centos-8-scenario010-standalone-master
    parent: tripleo-ci-base-standalone-periodic-centos-8
    vars:
      tags:
        - build
        - standalone
        - octavia
      # using featureset062 is tech debt and should be addressed at a future sprint
      featureset: '062'
      release: master
      standalone_ceph: true
      tempest_workers: 1
      featureset_override:
        run_tempest: true
        validate_services: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario010-standalone.yaml'
        use_os_tempest: false

- job:
    name: periodic-tripleo-ci-centos-8-scenario010-ovn-provider-standalone-master
    parent: periodic-tripleo-ci-centos-8-scenario010-standalone-master
    vars:
      featureset_override:
        run_tempest: true
        validate_services: false
        tempest_extra_config:
          load_balancer.provider: 'ovn'
          load_balancer.member_role: '"Member"'
          load_balancer.test_with_ipv6: false
          load_balancer.test_reuse_connection: false
          load_balancer.load_balancing_algorithm: 'SOURCE_IP_PORT'
          load_balancer.test_flavors: false
          loadbalancer-feature-enabled.health_monitor_enabled: false
          loadbalancer-feature-enabled.pool_algorithms_enabled: false
          loadbalancer-feature-enabled.l7_protocol_enabled: false
          loadbalancer-feature-enabled.l4_protocol: 'TCP'
          loadbalancer-feature-enabled.session_persistence_enabled: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario010-standalone.yaml'
        tempest_whitelist:
          - octavia_tempest_plugin.tests.scenario.v2.test_traffic_ops.TrafficOperationsScenarioTest.test_basic_traffic

- job:
    name: periodic-tripleo-ci-centos-8-scenario012-standalone-master
    voting: false
    parent: tripleo-ci-base-standalone-periodic-centos-8
    vars:
      featureset: '060'
      standalone_ceph: true
      release: master
      featureset_override:
        validate_services: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario012-standalone.yaml'
        tempest_plugins:
          - python-ironic-tests-tempest
        test_white_regex: ''
        tempest_workers: 1
        tempest_extra_config:
          auth.create_isolated_networks: 'False'
          validation.connect_method: 'fixed'
          validation.network_for_ssh: 'provisioning'
          baremetal.use_provision_network: 'True'
        tempest_whitelist:
          - 'ironic_tempest_plugin.tests.scenario.test_baremetal_multitenancy.BaremetalMultitenancy.test_baremetal_multitenancy'

### stable/train standalone jobs ###
# per https://review.rdoproject.org/r/#/c/22624/
# parenting off periodic-tripleo-ci-centos-7-standalone-master
- job:
    name: periodic-tripleo-ci-centos-7-standalone-train
    parent: periodic-tripleo-ci-centos-7-standalone-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-standalone-upgrade-train
    parent: periodic-tripleo-ci-centos-7-standalone-upgrade-master
    override-checkout: 'stable/train'
    vars:
      branch_override: 'stable/train'
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-standalone-full-tempest-train
    parent: periodic-tripleo-ci-centos-7-standalone-full-tempest-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-scenario001-standalone-train
    parent: periodic-tripleo-ci-centos-7-scenario001-standalone-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-scenario002-standalone-train
    parent: periodic-tripleo-ci-centos-7-scenario002-standalone-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-scenario003-standalone-train
    parent: periodic-tripleo-ci-centos-7-scenario003-standalone-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-scenario004-standalone-train
    parent: periodic-tripleo-ci-centos-7-scenario004-standalone-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-scenario007-standalone-train
    parent: periodic-tripleo-ci-centos-7-scenario007-standalone-master
    voting: false
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-centos-7-scenario010-standalone-train
    parent: periodic-tripleo-ci-centos-7-scenario010-standalone-master
    vars:
      branch_override: "stable/train"
      release: train

### stable/stein standalone jobs ###
- job:
    name: periodic-tripleo-ci-centos-7-standalone-stein
    parent: tripleo-ci-base-standalone-periodic
    vars:
      featureset: '052'
      branch_override: "stable/stein"
      release: stein

- job:
    name: periodic-tripleo-ci-centos-7-standalone-upgrade-stein
    parent: tripleo-ci-base-standalone-upgrade-periodic
    override-checkout: 'stable/stein'
    vars:
      featureset: '056'
      branch_override: 'stable/stein'
      release: stein

- job:
    name: periodic-tripleo-ci-centos-7-standalone-full-tempest-stein
    parent: periodic-tripleo-ci-centos-7-standalone-stein
    vars:
      featureset: '052'
      branch_override: "stable/stein"
      release: stein
      featureset_override:
        test_white_regex: '.*'

- job:
    name: periodic-tripleo-ci-centos-7-scenario001-standalone-stein
    parent: tripleo-ci-base-standalone-periodic
    vars:
      featureset: '052'
      branch_override: "stable/stein"
      release: stein
      standalone_ceph: true
      featureset_override:
        standalone_container_cli: docker
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario001-standalone.yaml'
        tempest_plugins:
          - python-telemetry-tests-tempest
          - python-heat-tests-tempest
        test_white_regex: ''
        tempest_workers: 1
        tempest_extra_config: {'telemetry.alarm_granularity': '60'}
        tempest_whitelist:
          - 'tempest.api.identity.v3'
          - 'tempest.scenario.test_volume_boot_pattern.TestVolumeBootPattern.test_volume_boot_pattern'
          - 'telemetry_tempest_plugin.scenario.test_telemetry_integration.TestTelemetryIntegration'

- job:
    name: periodic-tripleo-ci-centos-7-scenario002-standalone-stein
    parent: tripleo-ci-base-standalone-periodic
    vars:
      featureset: '052'
      branch_override: "stable/stein"
      release: stein
      featureset_override:
        standalone_container_cli: docker
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario002-standalone.yaml'
        tempest_whitelist:
          - 'tempest.api.object_storage.test_object_services.ObjectTest'
          - 'barbican_tempest_plugin.tests.scenario.test_volume_encryption.VolumeEncryptionTest'
          - 'barbican_tempest_plugin.tests.scenario.test_image_signing.ImageSigningSnapshotTest'
          - 'barbican_tempest_plugin.tests.scenario.test_image_signing.ImageSigningTest.test_signed_image_upload_and_boot'
          - 'telemetry_tempest_plugin.scenario.test_telemetry_integration.TestTelemetryIntegration'
        tempest_plugins:
          - python-telemetry-tests-tempest
          - python-barbican-tests-tempest
        tempest_extra_config:
          auth.tempest_roles: "'Member, creator'"
          telemetry.alarm_granularity: '60'
        test_white_regex: ""

- job:
    name: periodic-tripleo-ci-centos-7-scenario003-standalone-stein
    parent: tripleo-ci-base-standalone-periodic
    vars:
      featureset: '052'
      branch_override: "stable/stein"
      release: stein
      featureset_override:
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario003-standalone.yaml'
        standalone_container_cli: docker
        tempest_whitelist:
          - 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_network_basic_ops'
          - 'sahara_tempest_plugin.tests.api.test_data_sources.DataSourceTest'
          - 'mistral_tempest_tests.tests.api.v2.test_actions.ActionTestsV2'
        tempest_plugins:
          - python-sahara-tests-tempest
          - python-mistral-tests-tempest
        test_white_regex: ""

- job:
    name: periodic-tripleo-ci-centos-7-scenario004-standalone-stein
    parent: tripleo-ci-base-standalone-periodic
    vars:
      featureset: '052'
      branch_override: "stable/stein"
      release: stein
      standalone_ceph: true
      featureset_override:
        standalone_container_cli: docker
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario004-standalone.yaml'
        tempest_whitelist:
          - 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_network_basic_ops'
          - 'manila_tempest_tests.tests.api.test_shares.SharesCephFSTest.test_create_get_delete_share'
        tempest_plugins:
          - python2-manila-tests-tempest
        tempest_extra_config:
          'share.multitenancy_enabled': 'False'
          'share.enable_protocols': 'cephfs'
          'share.capability_snapshot_support': 'False'
          'share.capability_create_share_from_snapshot_support': 'False'
        test_white_regex: ''

- job:
    name: periodic-tripleo-ci-centos-7-scenario010-standalone-stein
    parent: tripleo-ci-base-standalone-periodic
    vars:
      featureset: '052'
      branch_override: "stable/stein"
      release: stein
      standalone_ceph: true
      featureset_override:
        standalone_container_cli: docker
        run_tempest: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'environments/services/octavia.yaml'
          - 'ci/environments/scenario010-standalone.yaml'
        use_os_tempest: false

# RHEL8 periodic jobs - parent on centos7 to avoid duplication. cost is
# carrying nodeset/host-vars. https://tree.taiga.io/project/tripleo-ci-board/us/1228

- job:
    name: periodic-tripleo-ci-rhel-8-standalone-master
    parent: periodic-tripleo-ci-centos-7-standalone-master
    nodeset: single-rhel-8-node
    branches: ^master$
    host-vars:
      primary:
        ansible_python_interpreter: /usr/bin/python3

- job:
    name: periodic-tripleo-ci-rhel-8-scenario001-standalone-master
    parent: periodic-tripleo-ci-centos-7-scenario001-standalone-master
    nodeset: single-rhel-8-node
    branches: ^master$
    host-vars:
      primary:
        ansible_python_interpreter: /usr/bin/python3

- job:
    name: periodic-tripleo-ci-rhel-8-scenario002-standalone-master
    parent: periodic-tripleo-ci-centos-7-scenario002-standalone-master
    nodeset: single-rhel-8-node
    branches: ^master$
    host-vars:
      primary:
        ansible_python_interpreter: /usr/bin/python3

- job:
    name: periodic-tripleo-ci-rhel-8-scenario003-standalone-master
    parent: periodic-tripleo-ci-centos-7-scenario003-standalone-master
    nodeset: single-rhel-8-node
    branches: ^master$
    host-vars:
      primary:
        ansible_python_interpreter: /usr/bin/python3

- job:
    name: periodic-tripleo-ci-rhel-8-scenario004-standalone-master
    parent: periodic-tripleo-ci-centos-7-scenario004-standalone-master
    vars:
      featureset_override: &scenario004_podman
        standalone_container_cli: podman
        run_tempest: false
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario004-standalone.yaml'
          - 'environments/podman.yaml'
        tempest_services:
          - manila
        tempest_tempest_conf_overrides:
          'auth.tempest_roles': 'Member'
          'share.multitenancy_enabled': 'False'
          'share.enable_protocols': 'cephfs'
          'share.capability_snapshot_support': 'False'
          'share.capability_create_share_from_snapshot_support': 'False'
        tempest_test_whitelist:
          - 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_network_basic_ops'
          - 'manila_tempest_tests.tests.api.test_shares.SharesCephFSTest.test_create_get_delete_share'
        use_os_tempest: true
    nodeset: single-rhel-8-node
    branches: ^master$

### stable/train standalone periodic RHEL8 jobs ###
- job:
    name: periodic-tripleo-ci-rhel-8-standalone-train
    parent: periodic-tripleo-ci-rhel-8-standalone-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-rhel-8-scenario001-standalone-train
    parent: periodic-tripleo-ci-rhel-8-scenario001-standalone-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-rhel-8-scenario002-standalone-train
    parent: periodic-tripleo-ci-rhel-8-scenario002-standalone-master
    vars:
      branch_override: "stable/train"
      release: train

- job:
    name: periodic-tripleo-ci-rhel-8-scenario003-standalone-train
    parent: periodic-tripleo-ci-rhel-8-scenario003-standalone-master
    vars:
      branch_override: "stable/train"
      release: train
    # disabled voting until pyngus appears: https://bugs.launchpad.net/tripleo/+bug/1840828
    voting: false

- job:
    name: periodic-tripleo-ci-rhel-8-scenario004-standalone-train
    parent: periodic-tripleo-ci-rhel-8-scenario004-standalone-master
    vars:
      branch_override: "stable/train"
      release: train

# RDO jobs for check pipeline - for scenario standalones yaml anchors let us
# avoid duplication https://tree.taiga.io/project/tripleo-ci-board/us/1228
- job:
    name: tripleo-ci-centos-7-standalone-rdo
    parent: tripleo-ci-base-standalone-rdo
    vars:
      featureset: '052'

- job:
    name: tripleo-ci-rhel-8-standalone-rdo
    parent: tripleo-ci-base-standalone-rdo
    nodeset: single-rhel-8-node
    host-vars:
      primary:
        ansible_python_interpreter: /usr/bin/python3
    vars: *standalone_vars

- job:
    name: periodic-tripleo-ci-rhel-8-standalone-rdo
    parent: tripleo-ci-base-standalone-periodic
    nodeset: single-rhel-8-node
    branches: ^master$
    host-vars:
      primary:
        ansible_python_interpreter: /usr/bin/python3
    vars: *standalone_vars

- job:
    name: tripleo-ci-rhel-8-scenario001-standalone-rdo
    parent: tripleo-ci-rhel-8-standalone-rdo
    branches: ^master$
    vars: *scen1_standalone_vars

- job:
    name: tripleo-ci-rhel-8-scenario002-standalone-rdo
    parent: tripleo-ci-rhel-8-standalone-rdo
    branches: ^master$
    vars: *scen2_standalone_vars

- job:
    name: tripleo-ci-rhel-8-scenario003-standalone-rdo
    parent: tripleo-ci-rhel-8-standalone-rdo
    branches: ^master$
    vars: *scen3_standalone_vars

- job:
    name: tripleo-ci-rhel-8-scenario004-standalone-rdo
    parent: tripleo-ci-rhel-8-standalone-rdo
    vars:
      featureset: '052'
      standalone_ceph: true
      featureset_override: *scenario004_podman
    nodeset: single-rhel-8-node
    branches: ^master$

# Component promotion jobs
- job:
    name: periodic-tripleo-ci-centos-8-standalone-component-master
    parent: periodic-tripleo-ci-centos-8-standalone-master
    abstract: true
    vars: &component_vars
      component: component
      release: master
      dlrn_server_url: "trunk.rdoproject.org"
      promote_source: component-ci-testing
      add_repos:
        - type: generic
          reponame: "{{ component }}"
          filename: "{{ component }}-component.repo"
          priority: 1
          baseurl: "https://{{ dlrn_server_url }}/centos8-{{ release }}/component/{{ component }}/component-ci-testing"
          update_container: true

- job:
    name: periodic-tripleo-ci-centos-8-standalone-baremetal-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: baremetal

- job:
    name: periodic-tripleo-ci-centos-8-standalone-cinder-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: cinder

- job:
    name: periodic-tripleo-ci-centos-8-standalone-clients-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: clients

- job:
    name: periodic-tripleo-ci-centos-8-standalone-cloudops-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: cloudops

- job:
    name: periodic-tripleo-ci-centos-8-standalone-common-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-8-standalone-compute-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: compute

- job:
    name: periodic-tripleo-ci-centos-8-standalone-glance-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: glance

- job:
    name: periodic-tripleo-ci-centos-8-standalone-manila-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: manila

- job:
    name: periodic-tripleo-ci-centos-8-standalone-network-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: network

- job:
    name: periodic-tripleo-ci-centos-8-standalone-octavia-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: octavia

- job:
    name: periodic-tripleo-ci-centos-8-standalone-security-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: security

- job:
    name: periodic-tripleo-ci-centos-8-standalone-swift-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: swift

- job:
    name: periodic-tripleo-ci-centos-8-standalone-tempest-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: tempest

- job:
    name: periodic-tripleo-ci-centos-8-standalone-tripleo-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: tripleo

- job:
    name: periodic-tripleo-ci-centos-8-standalone-ui-master
    parent: periodic-tripleo-ci-centos-8-standalone-component-master
    vars:
      component: ui

## Component scenario jobs

# scenario001-standalone-component
- job:
    name: periodic-tripleo-ci-centos-8-scenario001-standalone-component-master
    parent: periodic-tripleo-ci-centos-8-scenario001-standalone-master
    abstract: true
    vars: *component_vars

- job:
    name: periodic-tripleo-ci-centos-8-scenario001-standalone-cinder-master
    parent: periodic-tripleo-ci-centos-8-scenario001-standalone-component-master
    vars:
      component: cinder

- job:
    name: periodic-tripleo-ci-centos-8-scenario001-standalone-cloudops-master
    parent: periodic-tripleo-ci-centos-8-scenario001-standalone-component-master
    vars:
      component: cloudops

- job:
    name: periodic-tripleo-ci-centos-8-scenario001-standalone-common-master
    parent: periodic-tripleo-ci-centos-8-scenario001-standalone-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-8-scenario001-standalone-glance-master
    parent: periodic-tripleo-ci-centos-8-scenario001-standalone-component-master
    vars:
      component: glance

# scenario002-standalone-component
- job:
    name: periodic-tripleo-ci-centos-8-scenario002-standalone-component-master
    parent: periodic-tripleo-ci-centos-8-scenario002-standalone-master
    abstract: true
    vars: *component_vars

- job:
    name: periodic-tripleo-ci-centos-8-scenario002-standalone-cloudops-master
    parent: periodic-tripleo-ci-centos-8-scenario002-standalone-component-master
    vars:
      component: cloudops

- job:
    name: periodic-tripleo-ci-centos-8-scenario002-standalone-common-master
    parent: periodic-tripleo-ci-centos-8-scenario002-standalone-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-8-scenario002-standalone-glance-master
    parent: periodic-tripleo-ci-centos-8-scenario002-standalone-component-master
    vars:
      component: glance

- job:
    name: periodic-tripleo-ci-centos-8-scenario002-standalone-swift-master
    parent: periodic-tripleo-ci-centos-8-scenario002-standalone-component-master
    vars:
      component: swift

# scenario003-standalone-component
- job:
    name: periodic-tripleo-ci-centos-8-scenario003-standalone-component-master
    parent: periodic-tripleo-ci-centos-8-scenario003-standalone-master
    abstract: true
    vars: *component_vars

- job:
    name: periodic-tripleo-ci-centos-8-scenario003-standalone-common-master
    parent: periodic-tripleo-ci-centos-8-scenario003-standalone-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-8-scenario003-standalone-glance-master
    parent: periodic-tripleo-ci-centos-8-scenario003-standalone-component-master
    vars:
      component: glance

# scenario004-standalone-component
- job:
    name: periodic-tripleo-ci-centos-8-scenario004-standalone-component-master
    parent: periodic-tripleo-ci-centos-8-scenario004-standalone-master
    abstract: true
    vars: *component_vars

- job:
    name: periodic-tripleo-ci-centos-8-scenario004-standalone-cinder-master
    parent: periodic-tripleo-ci-centos-8-scenario004-standalone-component-master
    vars:
      component: cinder

- job:
    name: periodic-tripleo-ci-centos-8-scenario004-standalone-common-master
    parent: periodic-tripleo-ci-centos-8-scenario004-standalone-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-8-scenario004-standalone-glance-master
    parent: periodic-tripleo-ci-centos-8-scenario004-standalone-component-master
    vars:
      component: glance

- job:
    name: periodic-tripleo-ci-centos-8-scenario004-standalone-manila-master
    parent: periodic-tripleo-ci-centos-8-scenario004-standalone-component-master
    vars:
      component: manila

# scenario007-standalone-component
- job:
    name: periodic-tripleo-ci-centos-8-scenario007-standalone-component-master
    parent: periodic-tripleo-ci-centos-8-scenario007-standalone-master
    abstract: true
    vars: *component_vars

- job:
    name: periodic-tripleo-ci-centos-8-scenario007-standalone-network-master
    parent: periodic-tripleo-ci-centos-8-scenario007-standalone-component-master
    vars:
      component: network

- job:
    name: periodic-tripleo-ci-centos-8-scenario007-standalone-octavia-master
    parent: periodic-tripleo-ci-centos-8-scenario007-standalone-component-master
    vars:
      component: octavia

# scenario010-standalone-component
- job:
    name: periodic-tripleo-ci-centos-8-scenario010-standalone-component-master
    parent: periodic-tripleo-ci-centos-8-scenario010-standalone-master
    abstract: true
    vars: *component_vars

- job:
    name: periodic-tripleo-ci-centos-8-scenario010-standalone-network-master
    parent: periodic-tripleo-ci-centos-8-scenario010-standalone-component-master
    vars:
      component: network

- job:
    name: periodic-tripleo-ci-centos-8-scenario010-standalone-octavia-master
    parent: periodic-tripleo-ci-centos-8-scenario010-standalone-component-master
    vars:
      component: octavia

# standalone-full-tempest-component
- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-component-master
    parent: periodic-tripleo-ci-centos-8-standalone-full-tempest-master
    abstract: true
    vars: *component_vars

- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-compute-master
    parent: periodic-tripleo-ci-centos-8-standalone-full-tempest-component-master
    vars:
      component: compute

- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-tempest-master
    parent: periodic-tripleo-ci-centos-8-standalone-full-tempest-component-master
    vars:
      component: tempest

# standalone-full-tempest-component
- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-api-component-master
    parent: periodic-tripleo-ci-centos-8-standalone-full-tempest-api-master
    abstract: true
    vars: *component_vars

- job:
    name: periodic-tripleo-ci-centos-8-standalone-network-tempest-component-master
    parent: periodic-tripleo-ci-centos-8-standalone-network-tempest-master
    abstract: true
    vars: *component_vars

- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-scenario-component-master
    parent: periodic-tripleo-ci-centos-8-standalone-full-tempest-scenario-master
    abstract: true
    vars: *component_vars

- job:
    name: periodic-tripleo-ci-centos-8-standalone-network-tempest-network-master
    parent: periodic-tripleo-ci-centos-8-standalone-network-tempest-component-master
    vars:
      component: network

- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-api-compute-master
    parent: periodic-tripleo-ci-centos-8-standalone-full-tempest-api-component-master
    vars:
      component: compute

- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-scenario-compute-master
    parent: periodic-tripleo-ci-centos-8-standalone-full-tempest-scenario-component-master
    vars:
      component: compute

- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-api-tempest-master
    parent: periodic-tripleo-ci-centos-8-standalone-full-tempest-api-component-master
    vars:
      component: tempest

- job:
    name: periodic-tripleo-ci-centos-8-standalone-full-tempest-scenario-tempest-master
    parent: periodic-tripleo-ci-centos-8-standalone-full-tempest-scenario-component-master
    vars:
      component: tempest
