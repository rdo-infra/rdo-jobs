---
# zuul.d/build-containers.yaml
# Zuul layout for TripleO Build Containers jobs.

- project-template:
    name: tripleo-build-containers-jobs
    openstack-check:
      jobs:
        - tripleo-build-containers-fedora-28-master
        - tripleo-build-containers-fedora-28-stein

- job:
    name: tripleo-build-containers-fedora-28-master
    parent: tripleo-build-containers-base-with-files
    nodeset: single-upstream-fedora-28-node
    voting: false

- job:
    name: tripleo-build-containers-fedora-28-stein
    parent: tripleo-build-containers-base-with-files
    nodeset: single-upstream-fedora-28-node
    voting: false
    override-checkout: 'stable/stein'
    vars:
      release: stein
      branch_override: 'stable/stein'

- job:
    name: tripleo-build-containers-rhel-8-master
    parent: tripleo-build-containers-base-with-files
    nodeset: single-rhel-8-node
    voting: true
    host-vars:
      primary:
        ansible_python_interpreter: /usr/bin/python3
      localhost:
        ansible_python_interpreter: /usr/bin/python3
    vars:
      release: master
      use_buildah: true
      # Keep string empty, or kolla will try to download delorean repos on its own
      buildcontainers_rpm_setup_config: ""
      kolla_base: rhel
      kolla_base_pull: false
      kolla_base_image: rhel
      kolla_base_tag: 8.0-126
