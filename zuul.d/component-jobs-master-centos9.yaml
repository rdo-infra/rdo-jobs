---
# component master jobs

## promote-consistent-to-component-ci-testing

- job:
    name: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-base-promote-consistent-to-component-ci-testing
    nodeset: cloud-centos-9-stream-vexxhost
    vars:
      release: master
      dlrn_server_url: "trunk.rdoproject.org"

- job:
    name: periodic-tripleo-centos-9-master-component-baremetal-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: baremetal

- job:
    name: periodic-tripleo-centos-9-master-component-cinder-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: cinder

- job:
    name: periodic-tripleo-centos-9-master-component-clients-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: clients

- job:
    name: periodic-tripleo-centos-9-master-component-cloudops-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: cloudops

- job:
    name: periodic-tripleo-centos-9-master-component-common-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: common

- job:
    name: periodic-tripleo-centos-9-master-component-compute-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: compute

- job:
    name: periodic-tripleo-centos-9-master-component-glance-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: glance

- job:
    name: periodic-tripleo-centos-9-master-component-manila-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: manila

- job:
    name: periodic-tripleo-centos-9-master-component-network-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: network

- job:
    name: periodic-tripleo-centos-9-master-component-octavia-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: octavia

- job:
    name: periodic-tripleo-centos-9-master-component-security-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: security

- job:
    name: periodic-tripleo-centos-9-master-component-swift-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: swift

- job:
    name: periodic-tripleo-centos-9-master-component-tripleo-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: tripleo

- job:
    name: periodic-tripleo-centos-9-master-component-tempest-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: tempest

- job:
    name: periodic-tripleo-centos-9-master-component-ui-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: ui
- job:
    name: periodic-tripleo-centos-9-master-component-validation-promote-consistent-to-component-ci-testing
    parent: tripleo-ci-centos-9-master-base-promote-consistent-to-component-ci-testing
    vars:
      component: validation


## promote-to-promoted-components


- job:
    name: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    parent: tripleo-ci-base-component-promote-to-promoted-components
    nodeset: cloud-centos-9-stream-vexxhost
    vars:
      release: master

- job:
    name: periodic-tripleo-centos-9-master-component-baremetal-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: baremetal

- job:
    name: periodic-tripleo-centos-9-master-component-cinder-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: cinder

- job:
    name: periodic-tripleo-centos-9-master-component-clients-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: clients

- job:
    name: periodic-tripleo-centos-9-master-component-cloudops-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: cloudops

- job:
    name: periodic-tripleo-centos-9-master-component-common-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: common

- job:
    name: periodic-tripleo-centos-9-master-component-compute-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: compute

- job:
    name: periodic-tripleo-centos-9-master-component-glance-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: glance

- job:
    name: periodic-tripleo-centos-9-master-component-manila-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: manila

- job:
    name: periodic-tripleo-centos-9-master-component-network-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: network

- job:
    name: periodic-tripleo-centos-9-master-component-octavia-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: octavia

- job:
    name: periodic-tripleo-centos-9-master-component-security-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: security

- job:
    name: periodic-tripleo-centos-9-master-component-swift-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: swift

- job:
    name: periodic-tripleo-centos-9-master-component-tempest-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: tempest

- job:
    name: periodic-tripleo-centos-9-master-component-tripleo-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: tripleo

- job:
    name: periodic-tripleo-centos-9-master-component-ui-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: ui

- job:
    name: periodic-tripleo-centos-9-master-component-validation-promote-to-promoted-components
    parent: tripleo-ci-centos-9-master-base-component-promote-to-promoted-components
    vars:
      component: validation

## standalone component jobs

- job:
    name: periodic-tripleo-ci-centos-9-standalone-component-master
    parent: periodic-tripleo-ci-centos-9-standalone-master
    abstract: true
    vars: &component_vars_standalone
      component: component
      release: master
      dlrn_server_url: "trunk.rdoproject.org"
      promote_source: component-ci-testing
      add_repos:
        - type: generic
          reponame: "{{ component }}"
          filename: "{{ component }}-component.repo"
          priority: 1
          baseurl: "https://{{ dlrn_server_url }}/centos9-{{ release }}/component/{{ component }}/component-ci-testing"
          update_container: true

- job:
    name: periodic-tripleo-ci-centos-9-standalone-baremetal-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: baremetal

- job:
    name: periodic-tripleo-ci-centos-9-standalone-cinder-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: cinder

- job:
    name: periodic-tripleo-ci-centos-9-standalone-clients-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: clients

- job:
    name: periodic-tripleo-ci-centos-9-standalone-cloudops-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: cloudops

- job:
    name: periodic-tripleo-ci-centos-9-standalone-common-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-9-standalone-compute-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: compute

- job:
    name: periodic-tripleo-ci-centos-9-standalone-glance-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: glance

- job:
    name: periodic-tripleo-ci-centos-9-standalone-manila-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: manila

- job:
    name: periodic-tripleo-ci-centos-9-standalone-network-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: network

- job:
    name: periodic-tripleo-ci-centos-9-standalone-octavia-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: octavia

- job:
    name: periodic-tripleo-ci-centos-9-standalone-security-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: security

- job:
    name: periodic-tripleo-ci-centos-9-standalone-swift-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: swift

- job:
    name: periodic-tripleo-ci-centos-9-standalone-tempest-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: tempest

- job:
    name: periodic-tripleo-ci-centos-9-standalone-tripleo-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: tripleo

- job:
    name: periodic-tripleo-ci-centos-9-standalone-ui-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: ui

- job:
    name: periodic-tripleo-ci-centos-9-standalone-validation-master
    parent: periodic-tripleo-ci-centos-9-standalone-component-master
    vars:
      component: validation
      enable_validation: true


## scenario001-standalone-component jobs

- job:
    name: periodic-tripleo-ci-centos-9-scenario001-standalone-component-master
    parent: periodic-tripleo-ci-centos-9-scenario001-standalone-master
    abstract: true
    vars: *component_vars_standalone

- job:
    name: periodic-tripleo-ci-centos-9-scenario001-standalone-cinder-master
    parent: periodic-tripleo-ci-centos-9-scenario001-standalone-component-master
    vars:
      component: cinder

- job:
    name: periodic-tripleo-ci-centos-9-scenario001-standalone-cloudops-master
    parent: periodic-tripleo-ci-centos-9-scenario001-standalone-component-master
    vars:
      component: cloudops

- job:
    name: periodic-tripleo-ci-centos-9-scenario001-standalone-common-master
    parent: periodic-tripleo-ci-centos-9-scenario001-standalone-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-9-scenario001-standalone-glance-master
    parent: periodic-tripleo-ci-centos-9-scenario001-standalone-component-master
    vars:
      component: glance


## scenario002-standalone-component jobs

- job:
    name: periodic-tripleo-ci-centos-9-scenario002-standalone-component-master
    parent: periodic-tripleo-ci-centos-9-scenario002-standalone-master
    abstract: true
    vars: *component_vars_standalone

- job:
    name: periodic-tripleo-ci-centos-9-scenario002-standalone-cloudops-master
    parent: periodic-tripleo-ci-centos-9-scenario002-standalone-component-master
    vars:
      component: cloudops

- job:
    name: periodic-tripleo-ci-centos-9-scenario002-standalone-common-master
    parent: periodic-tripleo-ci-centos-9-scenario002-standalone-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-9-scenario002-standalone-glance-master
    parent: periodic-tripleo-ci-centos-9-scenario002-standalone-component-master
    vars:
      component: glance

- job:
    name: periodic-tripleo-ci-centos-9-scenario002-standalone-swift-master
    parent: periodic-tripleo-ci-centos-9-scenario002-standalone-component-master
    vars:
      component: swift


## scenario003-standalone-component jobs
- job:
    name: periodic-tripleo-ci-centos-9-scenario003-standalone-component-master
    parent: periodic-tripleo-ci-centos-9-scenario003-standalone-master
    abstract: true
    vars: *component_vars_standalone

- job:
    name: periodic-tripleo-ci-centos-9-scenario003-standalone-common-master
    parent: periodic-tripleo-ci-centos-9-scenario003-standalone-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-9-scenario003-standalone-glance-master
    parent: periodic-tripleo-ci-centos-9-scenario003-standalone-component-master
    vars:
      component: glance


## scenario004-standalone-component jobs

- job:
    name: periodic-tripleo-ci-centos-9-scenario004-standalone-component-master
    parent: periodic-tripleo-ci-centos-9-scenario004-standalone-master
    abstract: true
    vars: *component_vars_standalone

- job:
    name: periodic-tripleo-ci-centos-9-scenario004-standalone-cinder-master
    parent: periodic-tripleo-ci-centos-9-scenario004-standalone-component-master
    vars:
      component: cinder

- job:
    name: periodic-tripleo-ci-centos-9-scenario004-standalone-common-master
    parent: periodic-tripleo-ci-centos-9-scenario004-standalone-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-9-scenario004-standalone-glance-master
    parent: periodic-tripleo-ci-centos-9-scenario004-standalone-component-master
    vars:
      component: glance

- job:
    name: periodic-tripleo-ci-centos-9-scenario004-standalone-manila-master
    parent: periodic-tripleo-ci-centos-9-scenario004-standalone-component-master
    vars:
      component: manila

- job:
    name: periodic-tripleo-ci-centos-9-scenario004-standalone-tripleo-master
    parent: periodic-tripleo-ci-centos-9-scenario004-standalone-component-master
    vars:
      component: tripleo


## scenario007-standalone-component jobs

- job:
    name: periodic-tripleo-ci-centos-9-scenario007-standalone-master
    parent: periodic-tripleo-ci-centos-8-scenario007-standalone-master
    nodeset: single-centos-9-stream-node-vexxhost

- job:
    name: periodic-tripleo-ci-centos-9-scenario007-standalone-component-master
    parent: periodic-tripleo-ci-centos-9-scenario007-standalone-master
    abstract: true
    vars: *component_vars_standalone

- job:
    name: periodic-tripleo-ci-centos-9-scenario007-standalone-network-master
    parent: periodic-tripleo-ci-centos-9-scenario007-standalone-component-master
    vars:
      component: network

- job:
    name: periodic-tripleo-ci-centos-9-scenario007-standalone-octavia-master
    parent: periodic-tripleo-ci-centos-9-scenario007-standalone-component-master
    vars:
      component: octavia


## standalone-full-tempest-api-component jobs

- job:
    name: periodic-tripleo-ci-centos-9-standalone-full-tempest-api-component-master
    parent: periodic-tripleo-ci-centos-9-standalone-full-tempest-api-master
    abstract: true
    vars: *component_vars_standalone

- job:
    name: periodic-tripleo-ci-centos-9-standalone-full-tempest-api-compute-master
    parent: periodic-tripleo-ci-centos-9-standalone-full-tempest-api-component-master
    vars:
      component: compute

- job:
    name: periodic-tripleo-ci-centos-9-standalone-full-tempest-api-network-master
    parent: periodic-tripleo-ci-centos-9-standalone-full-tempest-api-component-master
    vars:
      component: network

- job:
    name: periodic-tripleo-ci-centos-9-standalone-full-tempest-api-tempest-master
    parent: periodic-tripleo-ci-centos-9-standalone-full-tempest-api-component-master
    vars:
      component: tempest


## standalone-full-tempest-scenario-component jobs

- job:
    name: periodic-tripleo-ci-centos-9-standalone-full-tempest-scenario-component-master
    parent: periodic-tripleo-ci-centos-9-standalone-full-tempest-scenario-master
    abstract: true
    vars: *component_vars_standalone

- job:
    name: periodic-tripleo-ci-centos-9-standalone-full-tempest-scenario-compute-master
    parent: periodic-tripleo-ci-centos-9-standalone-full-tempest-scenario-component-master
    vars:
      component: compute

- job:
    name: periodic-tripleo-ci-centos-9-standalone-full-tempest-scenario-tempest-master
    parent: periodic-tripleo-ci-centos-9-standalone-full-tempest-scenario-component-master
    vars:
      component: tempest


## scenario012-standalone-component jobs

- job:
    name: periodic-tripleo-ci-centos-9-scenario012-standalone-component-master
    parent: periodic-tripleo-ci-centos-9-scenario012-standalone-master
    abstract: true
    vars: *component_vars_standalone

- job:
    name: periodic-tripleo-ci-centos-9-scenario012-standalone-compute-master
    parent: periodic-tripleo-ci-centos-9-scenario012-standalone-component-master
    vars:
      component: compute

- job:
    name: periodic-tripleo-ci-centos-9-scenario012-standalone-baremetal-master
    parent: periodic-tripleo-ci-centos-9-scenario012-standalone-component-master
    vars:
      component: baremetal


## multinode component jobs

- job:
    name: periodic-tripleo-ci-centos-9-containers-multinode-component-master
    parent: periodic-tripleo-ci-centos-9-containers-multinode-master
    abstract: true
    vars: &component_vars_multinode
      component: component
      release: master
      dlrn_server_url: "trunk.rdoproject.org"
      promote_source: component-ci-testing
      add_repos:
        - type: generic
          reponame: "{{ component }}"
          filename: "{{ component }}-component.repo"
          priority: 1
          baseurl: "https://{{ dlrn_server_url }}/centos9-{{ release }}/component/{{ component }}/component-ci-testing"
          update_container: true

- job:
    name: periodic-tripleo-ci-centos-9-containers-multinode-clients-master
    parent: periodic-tripleo-ci-centos-9-containers-multinode-component-master
    vars:
      component: clients

- job:
    name: periodic-tripleo-ci-centos-9-containers-multinode-common-master
    parent: periodic-tripleo-ci-centos-9-containers-multinode-component-master
    vars:
      component: common

- job:
    name: periodic-tripleo-ci-centos-9-containers-multinode-network-master
    parent: periodic-tripleo-ci-centos-9-containers-multinode-component-master
    vars:
      component: network

- job:
    name: periodic-tripleo-ci-centos-9-containers-multinode-octavia-master
    parent: periodic-tripleo-ci-centos-9-containers-multinode-component-master
    vars:
      component: octavia

- job:
    name: periodic-tripleo-ci-centos-9-containers-multinode-security-master
    parent: periodic-tripleo-ci-centos-9-containers-multinode-component-master
    vars:
      component: security

- job:
    name: periodic-tripleo-ci-centos-9-containers-multinode-tripleo-master
    parent: periodic-tripleo-ci-centos-9-containers-multinode-component-master
    vars:
      component: tripleo

- job:
    name: periodic-tripleo-ci-centos-9-containers-multinode-validation-master
    parent: periodic-tripleo-ci-centos-9-containers-multinode-component-master
    description: |
      Job uses featureset 010 with one primary and one secondary node.
      The 'validations.yml' playbook of tripleo-quickstart is used to initiate
      role containing the actual tests. Set of tests run is determined on basis
      of the 'component' variable value.
      Sets the 'validations_inventory' variable to ensure that proper inventory
      is used by the executed validations. The default inventory path is set in
      the 'validations.yml' playbook as 'tripleo-deploy/tripleo-ansible-inventory.yaml',
      and is used by validation standalone jobs.
    vars:
      component: validation
      enable_validation: true
      extra_tags:
        - component-validations
      validations_inventory: "tripleo-deploy/undercloud/tripleo-ansible-inventory.yaml"

- job:
    name: periodic-tripleo-ci-centos-9-containers-multinode-1ctlr-1comp-validation-master
    parent: periodic-tripleo-ci-centos-9-containers-multinode-validation-master
    abstract: true
    nodeset: three-centos-8-nodes
    description: |
      Overrides 'overcloud_roles' variable of the '010' feature set to allow for
      two nodes, 1 controller and 1 compute.
      Sets the 'validations_inventory' variable to ensure that proper inventory
      is used by the executed validations. The default inventory path is set in
      the 'validations.yml' playbook as 'tripleo-deploy/tripleo-ansible-inventory.yaml'.
    vars:
      featureset_override:
        overcloud_roles:
          - name: Controller
            CountDefault: 1
            networks:
              - External
              - InternalApi
              - Storage
              - StorageMgmt
              - Tenant
            tags:
              - primary
              - controller
          - name: Compute
            CountDefault: 1
            networks:
              - External
              - InternalApi
              - Storage
              - StorageMgmt
              - Tenant
            tags:
              - compute

- job:
    name: periodic-tripleo-ci-centos-9-containers-multinode-tripleo-master-validation
    parent: periodic-tripleo-ci-centos-9-containers-multinode-validation-master
    vars:
      component: tripleo

# trigger jobs for scenario010

- job:
    name: create-scenario010-trigger-for-downstream-component-master-c9
    parent: create-scenario010-trigger-for-downstream
    abstract: true
    vars:
      trigger_branch: master
      trigger_component: "{{ component }}"
      trigger_os_distro: centos_9

- job:
    name: create-scenario010-trigger-for-downstream-network-master-c9
    parent: create-scenario010-trigger-for-downstream-component-master
    vars:
      component: network

- job:
    name: create-scenario010-trigger-for-downstream-octavia-master-c9
    parent: create-scenario010-trigger-for-downstream-component-master
    vars:
      component: octavia


## standalone-on-multinode-ipa jobs

- job:
    name: periodic-tripleo-ci-centos-9-standalone-on-multinode-ipa-component-master
    parent: periodic-tripleo-ci-centos-9-standalone-on-multinode-ipa-master
    abstract: true
    vars: *component_vars_standalone

- job:
    name: periodic-tripleo-ci-centos-9-standalone-on-multinode-ipa-tripleo-master
    parent: periodic-tripleo-ci-centos-9-standalone-on-multinode-ipa-component-master
    vars:
      component: tripleo

- job:
    name: periodic-tripleo-ci-centos-9-standalone-on-multinode-ipa-security-master
    parent: periodic-tripleo-ci-centos-9-standalone-on-multinode-ipa-component-master
    vars:
      component: security
