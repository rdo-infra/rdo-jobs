---
# wallaby integration pipeline - FIPS enabled jobs
- project-template:
    name: integration-pipeline-wallaby-centos9-fips
    openstack-periodic-integration-wallaby-centos9-fips:
      jobs:
        # NOTE: just build containers again, just in case previous lines failed on that step
        #  We don't want to promote tags in this case, since we don't plan to promote things here
        #  There is no build-containers job with FIPS enabled (FIPS issues with building bits)
        - periodic-tripleo-ci-build-containers-ubi-9-quay-push-wallaby:
            nodeset: single-centos-9-stream-node-fips-ibm-bm3
        - periodic-tripleo-ci-centos-9-standalone-fips-wallaby: &build_containers_cs_9_push_wallaby
            nodeset: single-centos-9-stream-node-fips-ibm-bm3
            dependencies: &dep_build_containers_cs_9_push_wallaby
              - periodic-tripleo-ci-build-containers-ubi-9-quay-push-wallaby
        - periodic-tripleo-ci-centos-9-scenario001-standalone-fips-wallaby: *build_containers_cs_9_push_wallaby
        - periodic-tripleo-ci-centos-9-scenario002-standalone-fips-wallaby: *build_containers_cs_9_push_wallaby
        - periodic-tripleo-ci-centos-9-scenario003-standalone-fips-wallaby: *build_containers_cs_9_push_wallaby
        - periodic-tripleo-ci-centos-9-scenario004-standalone-fips-wallaby: *build_containers_cs_9_push_wallaby
        - periodic-tripleo-ci-centos-9-scenario007-standalone-fips-wallaby: *build_containers_cs_9_push_wallaby
        - periodic-tripleo-ci-centos-9-scenario012-standalone-fips-wallaby: *build_containers_cs_9_push_wallaby
        # Runs on vexx
        - periodic-tripleo-ci-centos-9-scenario010-ovn-provider-standalone-fips-wallaby:
            dependencies: *dep_build_containers_cs_9_push_wallaby
        - periodic-tripleo-ci-centos-9-scenario010-kvm-standalone-fips-wallaby:
            dependencies: *dep_build_containers_cs_9_push_wallaby
        # Multinode
        - periodic-tripleo-ci-centos-9-containers-multinode-fips-wallaby: &fips_multinode_cs_9_wallaby
            nodeset: two-centos-9-nodes-fips-ibm-bm3
            dependencies: *dep_build_containers_cs_9_push_wallaby
        - periodic-tripleo-ci-centos-9-scenario000-multinode-oooq-container-updates-fips-wallaby: *fips_multinode_cs_9_wallaby
        - periodic-tripleo-ci-centos-9-scenario007-multinode-oooq-container-fips-wallaby: *fips_multinode_cs_9_wallaby
