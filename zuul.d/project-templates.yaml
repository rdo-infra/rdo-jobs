# Shared project-templates specific to the RDO Project

- project-template:
    name: system-required
    description: |
      Jobs that *every* project in RDO CI should have by default.
    merge-check:
      jobs:
        - noop

- project-template:
    name: package-check-jobs
    check:
      jobs:
        - legacy-tox-validate
    gate:
      jobs:
        - legacy-tox-validate

- project-template:
    name: package-distgit-check-jobs
    check:
      jobs:
        - legacy-rpmlint:
            dependencies:
              - legacy-DLRN-rpmbuild
            branches: ^rpm-master$
        - legacy-DLRN-build-tripleo:
            dependencies:
              - legacy-DLRN-rpmbuild
            voting: false
            branches: ^(master|stable/pike)|(rpm-)|(^(?!common)(\w+)-rdo)$
        - legacy-DLRN-rpmbuild:
            branches: ^(master|stable/pike)|(rpm-)|(^(?!common)(\w+)-rdo)$
        - legacy-DLRN-rpmbuild-fedora:
            branches: ^(master)|(rpm-master)$
            nodeset: rdo-fedora-28
            voting: false
        - distgit-cbs-validate:
            branches: ^(?!rpm-master).*$
    gate:
      jobs:
        - legacy-DLRN-rpmbuild:
            branches: ^(master|stable/pike)|(rpm-)|(^(?!common)(\w+)-rdo)$
        - distgit-cbs-final-build:
            branches: ^(?!rpm-master).*$

- project-template:
    name: puppet-openstack-integration-python3-jobs
    openstack-check:
      jobs:
        - puppet-openstack-integration-5-scenario-py3-tempest-centos-7:
            voting: false
            branches: ^master$
        - puppet-openstack-integration-5-scenario-py3-tempest-fedora-28:
            voting: false
            branches: ^master$
