# These jobs aim to validate that these nodesets are fit to be consumed by
# our jobs.
#
# TODO: run periodis on them
# TODO: run them when we build images to avoid regressions
- job:
    name: nodeset-validator-base
    abstract: true
    parent: tox
    vars:
      tox_envlist: linters
      tox_extra_args: --notest
    files:
      - zuul.d/nodeset.*
      - tools/test-setup.sh

- job:
    name: nodeset-validator-rdo-centos-8
    parent: nodeset-validator-base
    nodeset: rdo-centos-8

- job:
    name: nodeset-validator-rdo-centos-7
    parent: nodeset-validator-base
    nodeset: rdo-centos-7
    # python3-virtualenv is missing, causing an error (minor)
    voting: false

- job:
    name: nodeset-validator-centos-7
    parent: nodeset-validator-base
    nodeset: centos-7

- job:
    name: nodeset-validator-centos-8
    parent: nodeset-validator-base
    nodeset: centos-8

- job:
    name: nodeset-validator-single-centos-8-node
    parent: nodeset-validator-base
    nodeset: single-centos-8-node

- job:
    name: nodeset-validator-rdo-fedora-28
    parent: nodeset-validator-base
    nodeset: rdo-fedora-28

- project:
    check:
      jobs:
        - nodeset-validator-centos-7
        - nodeset-validator-centos-8
        - nodeset-validator-rdo-centos-7
        - nodeset-validator-rdo-centos-8
        - nodeset-validator-rdo-fedora-28
        - nodeset-validator-single-centos-8-node
