- job:
    name: weirdo-ansible-lint
    parent: base
    nodeset: rdo-centos-7
    run: playbooks/weirdo/ansible-lint/run.yaml
    required-projects:
      - rdo-infra/ansible-role-weirdo-common
      - rdo-infra/ansible-role-weirdo-kolla
      - rdo-infra/ansible-role-weirdo-logs
      - rdo-infra/ansible-role-weirdo-packstack
      - rdo-infra/ansible-role-weirdo-puppet-openstack
      - rdo-infra/weirdo

- job:
    name: weirdo-docs
    parent: base
    nodeset: rdo-centos-7
    run: playbooks/weirdo/docs/run.yaml
    required-projects:
      - rdo-infra/ansible-role-weirdo-common
      - rdo-infra/ansible-role-weirdo-kolla
      - rdo-infra/ansible-role-weirdo-logs
      - rdo-infra/ansible-role-weirdo-packstack
      - rdo-infra/ansible-role-weirdo-puppet-openstack
      - rdo-infra/weirdo
    files:
      - ^docs/.*$
      - ^.*\.rst$

- job:
    name: weirdo-integration-base
    parent: base
    nodeset: rdo-centos-7
    run: playbooks/weirdo/integration/run.yaml
    post-run: playbooks/weirdo/integration/post.yaml
    timeout: 7200
    required-projects:
      - openstack/packstack
      - rdo-infra/ansible-role-weirdo-common
      - rdo-infra/ansible-role-weirdo-kolla
      - rdo-infra/ansible-role-weirdo-logs
      - rdo-infra/ansible-role-weirdo-packstack
      - rdo-infra/ansible-role-weirdo-puppet-openstack
      - rdo-infra/weirdo

- job:
    name: weirdo-integration-master-packstack-scenario001-centos8
    parent: weirdo-integration-base
    vars:
      openstack_release: master
      scenario: scenario001
      selinux_enforcing: "false"
    nodeset: rdo-centos-8

- job:
    name: weirdo-integration-master-packstack-scenario003-centos8
    parent: weirdo-integration-base
    vars:
      openstack_release: master
      scenario: scenario003
      selinux_enforcing: "false"
    nodeset: rdo-centos-8

- job:
    name: weirdo-integration-master-puppet-scenario001-centos8
    parent: weirdo-integration-base
    vars:
      openstack_release: master
      scenario: scenario001
    nodeset: rdo-centos-8

- job:
    name: weirdo-integration-master-puppet-scenario003-centos8
    parent: weirdo-integration-base
    vars:
      openstack_release: master
      scenario: scenario003
    nodeset: rdo-centos-8

- job:
    name: weirdo-integration-master-puppet-scenario004-centos8
    parent: weirdo-integration-base
    vars:
      openstack_release: master
      scenario: scenario004
    nodeset: rdo-centos-8

- job:
    name: weirdo-integration-rocky-packstack-scenario002
    parent: weirdo-integration-base
    vars:
      openstack_release: rocky
      scenario: scenario002

- job:
    name: weirdo-integration-rocky-puppet-scenario002
    parent: weirdo-integration-base
    vars:
      openstack_release: rocky
      scenario: scenario002

- job:
    name: weirdo-integration-queens-packstack-scenario001
    parent: weirdo-integration-base
    vars:
      openstack_release: queens
      scenario: scenario001

- job:
    name: weirdo-integration-queens-packstack-scenario003
    parent: weirdo-integration-base
    vars:
      openstack_release: queens
      scenario: scenario003

- job:
    name: weirdo-integration-queens-puppet-scenario001
    parent: weirdo-integration-base
    vars:
      openstack_release: queens
      scenario: scenario001

- job:
    name: weirdo-integration-queens-puppet-scenario003
    parent: weirdo-integration-base
    vars:
      openstack_release: queens
      scenario: scenario003

- job:
    name: weirdo-dlrn-base
    parent: base
    run: playbooks/weirdo/dlrn/run.yaml
    post-run: playbooks/weirdo/dlrn/post.yaml
    timeout: 7200
    voting: false
    nodeset: rdo-centos-8
    branches: ^(rpm-)?master$
    required-projects:
      - openstack/packstack
      - rdo-infra/ansible-role-weirdo-common
      - rdo-infra/ansible-role-weirdo-kolla
      - rdo-infra/ansible-role-weirdo-logs
      - rdo-infra/ansible-role-weirdo-packstack
      - rdo-infra/ansible-role-weirdo-puppet-openstack
      - rdo-infra/weirdo
    dependencies:
      - DLRN-rpmbuild-centos8

- job:
    name: weirdo-dlrn-master-packstack-scenario001-centos8
    parent: weirdo-dlrn-base
    vars:
      openstack_release: master
      scenario: scenario001
      selinux_enforcing: "false"

- job:
    name: weirdo-dlrn-master-packstack-scenario002-centos8
    parent: weirdo-dlrn-base
    vars:
      openstack_release: master
      scenario: scenario002
      selinux_enforcing: "false"

- job:
    name: weirdo-dlrn-master-packstack-scenario003-centos8
    parent: weirdo-dlrn-base
    vars:
      openstack_release: master
      scenario: scenario003
      selinux_enforcing: "false"

- job:
    name: weirdo-dlrn-master-puppet-scenario001-centos8
    parent: weirdo-dlrn-base
    vars:
      openstack_release: master
      scenario: scenario001

- job:
    name: weirdo-dlrn-master-puppet-scenario002-centos8
    parent: weirdo-dlrn-base
    vars:
      openstack_release: master
      scenario: scenario002

- job:
    name: weirdo-dlrn-master-puppet-scenario003-centos8
    parent: weirdo-dlrn-base
    vars:
      openstack_release: master
      scenario: scenario003

- job:
    name: weirdo-dlrn-master-puppet-scenario004-centos8
    parent: weirdo-dlrn-base
    vars:
      openstack_release: master
      scenario: scenario004
