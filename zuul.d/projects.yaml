- project:
    name: rdo-jobs
    check:
      jobs:
        - tox-docs: &cfg
            # using fedora to get python3, can remove once we have centos-8
            nodeset: container-fedora
            vars:
              # needed to avoid accidental call of /usr/bin/tox
              tox_executable: "{{ ansible_python.executable }} -m tox"
            pre-run:
              - playbooks/pre-tox.yaml
        - tox-linters: *cfg
        - rdo-tox-molecule: &molecule
            files:
              - ^requirements.txt$
              - ^roles/.*
              - ^setup.*$
              - ^test-requirements.txt$
              - ^tox.ini$
              - .*molecule.*
        - tripleo-ci-rhel-8-ovb-3ctlr_1comp-featureset001
    gate:
      jobs:
        - tox-docs: *cfg
        - tox-linters: *cfg
        - rdo-tox-molecule: *molecule
