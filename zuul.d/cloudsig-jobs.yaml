- job:
    name: cloudsig-victoria-release-centos-8-scenario001-standalone
    parent: tripleo-ci-centos-8-scenario001-standalone
    nodeset: single-centos-8-node-vexxhost
    pre-run: playbooks/mirror.yaml
    roles:
      - zuul: opendev.org/openstack/tripleo-ansible
    override-checkout: "stable/victoria"
    vars:
      force_non_periodic: true
      featureset: '052'
      release: victoria
      standalone_ceph: true
      branch_override: "cloudsig/victoria"
      build_container_images: true
      use_buildah: true
      # push in centos8 needs to be handled differently
      push_containers: false
      run_test_role_vars:
        enable_opstools_repo: true
      featureset_override:
        standalone_environment_files:
          - 'environments/low-memory-usage.yaml'
          - 'ci/environments/scenario001-standalone.yaml'
        tempest_plugins:
          - python-telemetry-tests-tempest
          - python-heat-tests-tempest
        test_white_regex: ''
        tempest_workers: 1
        tempest_extra_config: {'telemetry.alarm_granularity': '60'}
        tempest_whitelist:
          - 'tempest.api.identity.v3'
          - 'tempest.scenario.test_volume_boot_pattern.TestVolumeBootPattern.test_volume_boot_pattern'
          - 'telemetry_tempest_plugin.scenario.test_telemetry_integration.TestTelemetryIntegration'
    required-projects:
      - opendev.org/openstack/ansible-role-container-registry
      - opendev.org/openstack/kolla
      - opendev.org/openstack/python-tripleoclient
      - opendev.org/openstack/requirements
      - opendev.org/openstack/tripleo-ansible
      - opendev.org/openstack/tripleo-common

- job:
    name: cloudsig-wallaby-release-centos-8-scenario001-standalone
    parent: cloudsig-victoria-release-centos-8-scenario001-standalone
    override-checkout: "stable/wallaby"
    vars:
      force_non_periodic: true
      featureset: '052'
      release: wallaby
      standalone_ceph: true
      branch_override: "cloudsig/wallaby"
      add_repos:
        - type: generic
          reponame: delorean-current-tripleo
          filename: delorean-current-tripleo.repo
          baseurl: "https://trunk.rdoproject.org/centos8-wallaby/component/tripleo/current-tripleo/"
        - type: generic
          reponame: delorean-current-tripleo-validation
          filename: delorean-current-tripleo-validation.repo
          baseurl: "https://trunk.rdoproject.org/centos8-wallaby/component/validation/current-tripleo/"
        - type: generic
          reponame: delorean-current-tripleo-baremetal
          filename: delorean-current-tripleo-baremetal.repo
          baseurl: "https://trunk.rdoproject.org/centos8-wallaby/component/baremetal/current-tripleo/"
          includepkgs:
            - python3-metalsmith
            - ansible-role-metalsmith-deployment
        - type: generic
          reponame: delorean-current-tripleo-security
          filename: delorean-current-tripleo-security.repo
          baseurl: "https://trunk.rdoproject.org/centos8-wallaby/component/security/current-tripleo/"
          includepkgs:
            - ansible-tripleo-ipa
        - type: generic
          reponame: delorean-current-tripleo-clients
          filename: delorean-current-tripleo-clients.repo
          baseurl: "https://trunk.rdoproject.org/centos8-wallaby/component/clients/current-tripleo/"
          includepkgs:
            - ansible-collections-openstack
        - type: generic
          reponame: delorean-current-tripleo-network
          filename: delorean-current-tripleo-network.repo
          baseurl: "https://trunk.rdoproject.org/centos8-wallaby/component/network/current-tripleo/"
          includepkgs:
            - python3-networking-vmware-nsx
            - python3-vmware-nsxlib
