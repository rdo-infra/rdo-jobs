{
  "comments": [
    {
      "key": {
        "uuid": "e6cdb950_823ad9be",
        "filename": "zuul.d/standalone-jobs.yaml",
        "patchSetId": 5
      },
      "lineNbr": 329,
      "author": {
        "id": 192
      },
      "writtenOn": "2019-08-14T09:38:10Z",
      "side": 1,
      "message": "12:25 \u003c sshnaidm\u003e marios, hi, I read a story about anchors/parenting, but it\u0027s still not clear to me\n12:30 \u003c marios\u003e sshnaidm: o/ did you read the \"Check\" part in design at https://tree.taiga.io/project/tripleo-ci-board/us/1228\n12:31 \u003c marios\u003e sshnaidm: which part wasn\u0027t clear? \"cannot use parenting because the periodics have an extra parent that the check jobs \n                do not have\" \n12:31 \u003c marios\u003e sshnaidm: that\u0027s the main part ^ \n12:31 \u003c sshnaidm\u003e marios, yeah, I don\u0027t understand why you don\u0027t inherit from centos standalone, like c7 sc001 -\u003e rhel8 sc001, etc\n12:32 \u003c marios\u003e sshnaidm: lets be specific cos maybe i missed something. so here                 https://review.rdoproject.org/r/#/c/21787/5/zuul.d/standalone-jobs.yaml@279 \n                periodic-tripleo-ci-rhel-8-scenario001-standalone-master\n12:32 \u003c marios\u003e sshnaidm: which job should that inherit from? \n12:32 \u003c marios\u003e sshnaidm: sorry wrong example... the issue is the check jobs\n12:33 \u003c marios\u003e sshnaidm: so here: https://review.rdoproject.org/r/#/c/21787/5/zuul.d/standalone-jobs.yaml@328 \n                tripleo-ci-rhel-8-scenario001-standalone-rdo \n12:33 \u003c marios\u003e sshnaidm: which job should that inherit from ( tripleo-ci-rhel-8-scenario001-standalone-rdo )",
      "range": {
        "startLine": 329,
        "startChar": 4,
        "endLine": 329,
        "endChar": 10
      },
      "revId": "913c2cf17f7976868b9a88d4e597e3525b09be63",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c2ab7564_5c121861",
        "filename": "zuul.d/standalone-jobs.yaml",
        "patchSetId": 5
      },
      "lineNbr": 329,
      "author": {
        "id": 192
      },
      "writtenOn": "2019-08-14T09:54:03Z",
      "side": 1,
      "message": "TL;DR we got there in the end - anchors aren\u0027t ideal but inheritance doesn\u0027t work easily:\n\n12:40 \u003c sshnaidm\u003e marios, I mean, tripleo-ci-rhel-8-scenario001-standalone-rdo can inherit from tripleo-ci-centos-7-scenario001-standalone-rdo\n12:40 \u003c sshnaidm\u003e marios, sorry, from regular tripleo-ci-centos-7-scenario001 job\n12:41 \u003c sshnaidm\u003e not from tripleo-ci-rhel-8-standalone-rdo\n12:41 \u003c marios\u003e sshnaidm: but what about the tripleo-ci-base-standalone-rdo that all the other rdo check jobs have? just ignore it and go directly upstream?\n12:42 \u003c marios\u003e sshnaidm: so you see the problem at least right? the rhel ones can use inheritance cos we have periodic scen1/2/34 to inherit from. However the check jobs can\u0027t because they \n                have dfferent parent. does that make sense at least now?\n12:42 \u003c sshnaidm\u003e marios, why not? when changing something in sa job upstream, you don\u0027t need to do it in rdo\n12:42 \u003c marios\u003e sshnaidm: which is why i use anchors. are you objecting to the use of anchors?\n12:43 \u003c sshnaidm\u003e marios, I don\u0027t object to anchors, I object to duplicate definitions and duplicate maintenance\n12:43 \u003c marios\u003e sshnaidm: but then why don\u0027t we do that for all of them like all the centos7/rhel8 stuff shoudl all go directly upstream but it doesn\u0027t currently we have parent jobs in rdo \n                they share and same for periodics with extra pre/post plays\n12:43 \u003c zbr|flu\u003e moning!\n12:43 \u003c marios\u003e sshnaidm: there is no duplicate definitions here though\n12:44 \u003c sshnaidm\u003e marios, we didn\u0027t run sa rdo jobs in check pipeline in upstream ever\n12:44 \u003c sshnaidm\u003e marios, so it\u0027s a new feature\n12:44 \u003c sshnaidm\u003e marios, all previous sa jobs were in periodic pipeline only\n12:45 \u003c marios\u003e sshnaidm: but what about that though /me checking that pre https://github.com/rdo-infra/review.rdoproject.org-config/blob/master/zuul.d/tripleo-rdo-base.yaml#L71 \n12:45 \u003c marios\u003e sshnaidm: i.e. we miss that parent ^ \n12:46 \u003c marios\u003e sshnaidm: hmm that looks important (all the nodepool/zuul stuff)\n12:46 \u003c marios\u003e sshnaidm: ?\n12:46 \u003c marios\u003e sshnaidm: besides that, i still don\u0027t get the objection? there is no duplicate definition here? \n12:47 \u003c sshnaidm\u003e marios, seems like we have it here: https://github.com/openstack/tripleo-ci/blob/master/playbooks/openstack-zuul-jobs/legacy/pre.yaml#L1\n12:49 \u003c sshnaidm\u003e marios, if tempest_test_whitelist changes tomorrow for sc002, how many changes should we do?\n12:49 \u003c marios\u003e sshnaidm: as many as you have to do today \n12:49 \u003c marios\u003e sshnaidm: upstream for scen2 and rdo for centos\n12:49 \u003c marios\u003e sshnaidm: (the rhel ones either inherit from the centos, or use the anchors from it)\n12:50 \u003c marios\u003e 12:46 \u003c marios\u003e sshnaidm: besides that, i still don\u0027t get the objection? there is no duplicate definition here? \n12:50 \u003c marios\u003e sshnaidm: i am not adding anything extra \n12:50 \u003c sshnaidm\u003e marios, yeah, you\u0027re right, missed that\n12:50 \u003c sshnaidm\u003e thought we need to do more changes\n12:50  * marios was worried i missed something too :D \n12:51 \u003c sshnaidm\u003e marios, no, that\u0027s fine, still prefer to use inheritance instead of anchors though, but won\u0027t block on that\n12:51 \u003c marios\u003e sshnaidm: like i couldn\u0027t get what you\u0027re saying. yes it would be *nicer* to inherit form upstream but then a) its different to what we have for the rest of the rdo check \n                jobs (and so could be confusing ) and we\u0027d have to work out running that pre in upstream instead and then b) it doesn\u0027t buy us anything anyway cos we can at least use anchors\n12:52 \u003c marios\u003e sshnaidm: i wanted to use inheritance. i used inheritance for the periodics cos it was feasible but for the check we had that issue with different parent. \n12:52 \u003c marios\u003e sshnaidm: anchors are not ideal , but at least it means we only have to change 1 place",
      "parentUuid": "e6cdb950_823ad9be",
      "range": {
        "startLine": 329,
        "startChar": 4,
        "endLine": 329,
        "endChar": 10
      },
      "revId": "913c2cf17f7976868b9a88d4e597e3525b09be63",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    }
  ]
}