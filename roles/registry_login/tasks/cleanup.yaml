- block:
    - name: Remove podman
      package:
        name:
           - podman
        state: absent
      register: remove_docker
      when: podman_install is defined and podman_install is changed
  rescue:
    - debug:
        msg: "unable to remove podman"
  become: true

- block:
    - name: Remove docker
      package:
        name:
           - docker
        state: absent
      register: remove_docker
      when: docker_install is defined and docker_install is changed
  rescue:
    - debug:
        msg: "unable to remove docker"
  become: true

