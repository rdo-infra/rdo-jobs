- name: Submit logstash processing jobs to log processors
  submit_log_processor_jobs:
    gearman_server: "{{ logstash_gearman_server }}"
    gearman_port: "{{ logstash_gearman_server_port }}"
    job: "push-log"
    config: "{{ logstash_processor_config }}"
    success: "{{ zuul_success }}"
    host_vars: "{{ hostvars }}"
    path: "{{ zuul.executor.log_root }}"
    log_url: "{{ (lookup('file', zuul.executor.result_data_file) | from_json).get('data').get('zuul').get('log_url') }}"
